import{C as _,n as c,v as e,K as V,m as z,y as p,r as I,o as ee,w as te,f as t,p as d,x as q,A as o,z as U,B as y,N as K,L as ie,M as de,g as re,O as ne,c as F,P as J,h as N,S as ue,U as me,V as X,q as se,F as le,E as oe,Q as A,J as ce,W as pe}from"./index-CUBQy48D.js";import{Q as ae}from"./QImg-B8fmnvHW.js";import{Q as B}from"./QSeparator-es0GegHz.js";import{Q as S,u as ve,a as be}from"./QInput-SjOosiTB.js";import{Q as P}from"./QCardSection-DxIQyhwE.js";import{Q as M}from"./QCard-DZMDY_Ca.js";import{Q as ye}from"./QPage-DqzRJpM6.js";import{u as Y}from"./checkout-store-BIfX1mY8.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as j}from"./QBanner-Bt6D-I6Y.js";import{Q as G}from"./QSelect-CyocrvOr.js";import{Q as Z}from"./QCheckbox-CwNH7dAi.js";import{Q as O}from"./QForm-DG6vkUlw.js";import{Q as R}from"./QSpace-DzDBJKf7.js";import{u as _e,a as ge}from"./use-dark-yr8oZmB6.js";import{o as he,u as xe}from"./use-checkbox-CztHn_fb.js";import"./use-timeout-sN3gBUuD.js";import"./focus-manager-BJWzFvJg.js";import"./QChip-FfYl9lOC.js";import"./QItem-DSAA0guS.js";import"./QItemLabel-CEL4gmKB.js";import"./QMenu-D77Uo7ck.js";import"./position-engine-BHw6Gt0E.js";import"./use-prevent-scroll-CqFGNme_.js";const fe={class:"checkout-progress"},ke={class:"row items-center justify-between"},we={class:"step-circle"},qe={key:1,class:"step-number"},Se={class:"step-circle"},$e={key:1,class:"step-number"},Ve={class:"step-circle"},Ce={key:1,class:"step-number"},Pe={class:"step-circle"},Me={key:2,class:"step-number"},ze={class:"row justify-between lt-sm q-mt-sm"},Te={__name:"CheckoutProgress",props:{currentStep:{type:Number,required:!0,default:1}},setup(m){return(v,s)=>(c(),_("div",fe,[e("div",ke,[e("div",{class:V(["col step-item",{active:m.currentStep>=1,completed:m.currentStep>1}])},[e("div",we,[m.currentStep>1?(c(),z(p,{key:0,name:"check",size:"20px",color:"white"})):(c(),_("span",qe,"1"))]),s[0]||(s[0]=e("div",{class:"step-label gt-xs"},"Shipping",-1))],2),e("div",{class:V(["step-connector",{completed:m.currentStep>1}])},null,2),e("div",{class:V(["col step-item",{active:m.currentStep>=2,completed:m.currentStep>2}])},[e("div",Se,[m.currentStep>2?(c(),z(p,{key:0,name:"check",size:"20px",color:"white"})):(c(),_("span",$e,"2"))]),s[1]||(s[1]=e("div",{class:"step-label gt-xs"},"Payment",-1))],2),e("div",{class:V(["step-connector",{completed:m.currentStep>2}])},null,2),e("div",{class:V(["col step-item",{active:m.currentStep>=3,completed:m.currentStep>3}])},[e("div",Ve,[m.currentStep>3?(c(),z(p,{key:0,name:"check",size:"20px",color:"white"})):(c(),_("span",Ce,"3"))]),s[2]||(s[2]=e("div",{class:"step-label gt-xs"},"Review",-1))],2),e("div",{class:V(["step-connector",{completed:m.currentStep>3}])},null,2),e("div",{class:V(["col step-item",{active:m.currentStep>=4,completed:m.currentStep>4}])},[e("div",Pe,[m.currentStep>4?(c(),z(p,{key:0,name:"check",size:"20px",color:"white"})):m.currentStep===4?(c(),z(p,{key:1,name:"check_circle",size:"24px",color:"white"})):(c(),_("span",Me,"4"))]),s[3]||(s[3]=e("div",{class:"step-label gt-xs"},"Complete",-1))],2)]),e("div",ze,[e("div",{class:V(["text-caption text-center",{"text-primary":m.currentStep>=1}])}," Shipping ",2),e("div",{class:V(["text-caption text-center",{"text-primary":m.currentStep>=2}])}," Payment ",2),e("div",{class:V(["text-caption text-center",{"text-primary":m.currentStep>=3}])}," Review ",2),e("div",{class:V(["text-caption text-center",{"text-primary":m.currentStep>=4}])}," Complete ",2)])]))}},Ie=D(Te,[["__scopeId","data-v-c9921e22"]]),Ae={class:"shipping-step"},Ue={class:"row q-col-gutter-md"},Le={class:"col-12 col-md-6"},Be={class:"col-12 col-md-6"},Qe={class:"row q-col-gutter-md"},Fe={class:"col-12 col-md-6"},Ne={class:"col-12 col-md-6"},je={__name:"ShippingStep",setup(m,{expose:v}){const s=Y(),u=I({full_name:"",email:"",phone:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"ZW",address_type:"home"}),g=I(!1),k=[{label:"Zimbabwe",value:"ZW"},{label:"South Africa",value:"ZA"},{label:"Botswana",value:"BW"},{label:"Namibia",value:"NA"},{label:"Zambia",value:"ZM"},{label:"Mozambique",value:"MZ"},{label:"Malawi",value:"MW"},{label:"Tanzania",value:"TZ"},{label:"Kenya",value:"KE"},{label:"United States",value:"US"},{label:"United Kingdom",value:"GB"},{label:"Other",value:"OTHER"}],h=[{label:"Home",value:"home"},{label:"Work",value:"work"},{label:"Other",value:"other"}];ee(()=>{s.shippingAddress&&s.shippingAddress.full_name&&(u.value={...s.shippingAddress})});let T=null;te(u,$=>{T&&clearTimeout(T),T=setTimeout(()=>{s.setShippingAddress($)},300)},{deep:!0});const C=async()=>{if(!s.canProceedToPayment){K.create({type:"negative",message:"Please complete all required fields",position:"top"});return}if(g.value&&!s.isGuestCheckout)try{await s.saveAddress(u.value)}catch($){console.error("Error saving address:",$)}s.proceedToNextStep()},f=$=>{$&&(s.billingAddress=null)};return v({onSubmit:C}),($,b)=>(c(),_("div",Ae,[t(M,{flat:"",bordered:""},{default:d(()=>[t(P,null,{default:d(()=>[b[13]||(b[13]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"Shipping Information",-1)),o(s).isGuestCheckout?(c(),z(j,{key:0,rounded:"",class:"bg-info text-white q-mb-md"},{avatar:d(()=>[t(p,{name:"info"})]),default:d(()=>[b[12]||(b[12]=U(" You're checking out as a guest. Create an account to save your address for faster checkout next time. ",-1))]),_:1})):q("",!0),t(O,{onSubmit:C,class:"q-gutter-md"},{default:d(()=>[t(S,{modelValue:u.value.full_name,"onUpdate:modelValue":b[0]||(b[0]=n=>u.value.full_name=n),outlined:"",label:"Full Name *",placeholder:"Enter your full name",rules:[n=>!!n||"Full name is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"person"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:u.value.email,"onUpdate:modelValue":b[1]||(b[1]=n=>u.value.email=n),outlined:"",type:"email",label:"Email Address *",placeholder:"your.email@example.com",rules:[n=>!!n||"Email is required",n=>/.+@.+\..+/.test(n)||"Please enter a valid email"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"email"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:u.value.phone,"onUpdate:modelValue":b[2]||(b[2]=n=>u.value.phone=n),outlined:"",type:"tel",label:"Phone Number *",placeholder:"+263 77 123 4567",rules:[n=>!!n||"Phone number is required",n=>n.length>=10||"Please enter a valid phone number"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"phone"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:u.value.address_line_1,"onUpdate:modelValue":b[3]||(b[3]=n=>u.value.address_line_1=n),outlined:"",label:"Address Line 1 *",placeholder:"Street address, P.O. Box",rules:[n=>!!n||"Address is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"home"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:u.value.address_line_2,"onUpdate:modelValue":b[4]||(b[4]=n=>u.value.address_line_2=n),outlined:"",label:"Address Line 2",placeholder:"Apartment, suite, unit, building, floor, etc.",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"business"})]),_:1},8,["modelValue","disable"]),e("div",Ue,[e("div",Le,[t(S,{modelValue:u.value.city,"onUpdate:modelValue":b[5]||(b[5]=n=>u.value.city=n),outlined:"",label:"City *",placeholder:"City",rules:[n=>!!n||"City is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"location_city"})]),_:1},8,["modelValue","rules","disable"])]),e("div",Be,[t(S,{modelValue:u.value.state,"onUpdate:modelValue":b[6]||(b[6]=n=>u.value.state=n),outlined:"",label:"State/Province",placeholder:"State or Province",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"map"})]),_:1},8,["modelValue","disable"])])]),e("div",Qe,[e("div",Fe,[t(S,{modelValue:u.value.postal_code,"onUpdate:modelValue":b[7]||(b[7]=n=>u.value.postal_code=n),outlined:"",label:"Postal/ZIP Code *",placeholder:"Postal code",rules:[n=>!!n||"Postal code is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"markunread_mailbox"})]),_:1},8,["modelValue","rules","disable"])]),e("div",Ne,[t(G,{modelValue:u.value.country,"onUpdate:modelValue":b[8]||(b[8]=n=>u.value.country=n),outlined:"",label:"Country *",options:k,"option-label":"label","option-value":"value","emit-value":"","map-options":"",rules:[n=>!!n||"Country is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"public"})]),_:1},8,["modelValue","rules","disable"])])]),t(G,{modelValue:u.value.address_type,"onUpdate:modelValue":b[9]||(b[9]=n=>u.value.address_type=n),outlined:"",label:"Address Type",options:h,"option-label":"label","option-value":"value","emit-value":"","map-options":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"category"})]),_:1},8,["modelValue","disable"]),o(s).isGuestCheckout?q("",!0):(c(),z(Z,{key:0,modelValue:g.value,"onUpdate:modelValue":b[10]||(b[10]=n=>g.value=n),label:"Save this address for future orders",color:"primary",disable:o(s).isLoading},null,8,["modelValue","disable"])),t(Z,{modelValue:o(s).useSameBillingAddress,"onUpdate:modelValue":[b[11]||(b[11]=n=>o(s).useSameBillingAddress=n),f],label:"Billing address is the same as shipping address",color:"primary",disable:o(s).isLoading},null,8,["modelValue","disable"]),o(s).error&&o(s).currentStep===1?(c(),z(j,{key:1,rounded:"",class:"bg-negative text-white"},{avatar:d(()=>[t(p,{name:"error"})]),default:d(()=>[U(" "+y(o(s).error),1)]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1})]))}},De=D(je,[["__scopeId","data-v-03e273ca"]]),Re=()=>N("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[N("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),N("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),E=ie({name:"QRadio",props:{..._e,...de,...ve,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(m,{slots:v,emit:s}){const{proxy:u}=re(),g=ge(m,u.$q),k=ne(m,he),h=I(null),{refocusTargetEl:T,refocusTarget:C}=xe(m,h),f=F(()=>J(m.modelValue)===J(m.val)),$=F(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(m.disable===!0?" disabled":"")+(g.value===!0?" q-radio--dark":"")+(m.dense===!0?" q-radio--dense":"")+(m.leftLabel===!0?" reverse":"")),b=F(()=>{const w=m.color!==void 0&&(m.keepColor===!0||f.value===!0)?` text-${m.color}`:"";return`q-radio__inner relative-position q-radio__inner--${f.value===!0?"truthy":"falsy"}${w}`}),n=F(()=>(f.value===!0?m.checkedIcon:m.uncheckedIcon)||null),Q=F(()=>m.disable===!0?-1:m.tabindex||0),L=F(()=>{const w={type:"radio"};return m.name!==void 0&&Object.assign(w,{".checked":f.value===!0,"^checked":f.value===!0?"checked":void 0,name:m.name,value:m.val}),w}),x=be(L);function a(w){w!==void 0&&(X(w),C(w)),m.disable!==!0&&f.value!==!0&&s("update:modelValue",m.val,w)}function r(w){(w.keyCode===13||w.keyCode===32)&&X(w)}function l(w){(w.keyCode===13||w.keyCode===32)&&a(w)}Object.assign(u,{set:a});const i=Re();return()=>{const w=n.value!==null?[N("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[N(p,{class:"q-radio__icon",name:n.value})])]:[i];m.disable!==!0&&x(w,"unshift"," q-radio__native q-ma-none q-pa-none");const W=[N("div",{class:b.value,style:k.value,"aria-hidden":"true"},w)];T.value!==null&&W.push(T.value);const H=m.label!==void 0?ue(v.default,[m.label]):me(v.default);return H!==void 0&&W.push(N("div",{class:"q-radio__label q-anchor--skip"},H)),N("div",{ref:h,class:$.value,tabindex:Q.value,role:"radio","aria-label":m.label,"aria-checked":f.value===!0?"true":"false","aria-disabled":m.disable===!0?"true":void 0,onClick:a,onKeydown:r,onKeyup:l},W)}}}),Ee={class:"payment-step"},Oe={class:"q-mb-lg"},Ze={class:"row q-col-gutter-md"},Ke={class:"col-12 col-md-6"},Ye={class:"row items-center"},We={class:"col-12 col-md-6"},Ge={class:"row items-center"},He={class:"col-12 col-md-6"},Je={class:"row items-center"},Xe={class:"col-12 col-md-6"},et={class:"row items-center"},tt={key:0,class:"q-mt-lg"},st={class:"row q-col-gutter-md"},lt={class:"col-12 col-md-6"},ot={class:"row q-col-gutter-xs"},at={class:"col-6"},it={class:"col-6"},dt={class:"col-12 col-md-6"},rt={class:"row items-center q-mt-sm q-gutter-xs"},nt={key:1,class:"q-mt-lg"},ut={key:2,class:"q-mt-lg"},mt={key:3,class:"q-mt-lg"},ct={__name:"PaymentStep",setup(m,{expose:v}){const s=Y(),u=I({card_number:"",cardholder_name:"",expiry_month:"",expiry_year:"",cvv:""}),g=I({mobile_money_provider:"",mobile_money_number:""}),k=I({bank_name:"",account_number:""}),h=I(!1),T=[{label:"EcoCash",value:"ecocash"},{label:"OneMoney",value:"onemoney"},{label:"Telecash",value:"telecash"},{label:"Other",value:"other"}];let C=!1;te(()=>s.paymentMethod,r=>{if(r&&s.paymentDetails){C=!0;const l=s.paymentDetails;r==="card"?u.value={...u.value,...l}:r==="mobile_money"?g.value={...g.value,...l}:r==="bank_transfer"&&(k.value={...k.value,...l}),setTimeout(()=>{C=!1},100)}},{immediate:!0});const f=r=>{s.setPaymentMethod(r,{}),u.value={card_number:"",cardholder_name:"",expiry_month:"",expiry_year:"",cvv:""},g.value={mobile_money_provider:"",mobile_money_number:""},k.value={bank_name:"",account_number:""}};let $=null;const b=()=>{C||($&&clearTimeout($),$=setTimeout(()=>{s.setPaymentMethod("card",{...u.value,card_number:u.value.card_number.replace(/\s/g,"")}),s.savePaymentMethod=h.value},300))};let n=null;const Q=()=>{C||(n&&clearTimeout(n),n=setTimeout(()=>{s.setPaymentMethod("mobile_money",g.value)},300))};let L=null;const x=()=>{C||(L&&clearTimeout(L),L=setTimeout(()=>{s.setPaymentMethod("bank_transfer",k.value)},300))};return v({onSubmit:()=>{if(!s.canProceedToReview){K.create({type:"negative",message:"Please complete all required payment information",position:"top"});return}s.proceedToNextStep()}}),(r,l)=>(c(),_("div",Ee,[t(M,{flat:"",bordered:""},{default:d(()=>[t(P,null,{default:d(()=>[l[29]||(l[29]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"Payment Method",-1)),e("div",Oe,[l[22]||(l[22]=e("div",{class:"text-body2 text-weight-medium q-mb-sm"},"Select Payment Method *",-1)),e("div",Ze,[e("div",Ke,[t(M,{flat:"",bordered:"",class:V(["payment-method-card cursor-pointer",{selected:o(s).paymentMethod==="card"}]),onClick:l[1]||(l[1]=i=>f("card"))},{default:d(()=>[t(P,{class:"q-pa-md"},{default:d(()=>[e("div",Ye,[t(p,{name:"credit_card",size:"32px",color:"primary",class:"q-mr-md"}),l[18]||(l[18]=e("div",null,[e("div",{class:"text-body1 text-weight-medium"},"Credit/Debit Card"),e("div",{class:"text-caption text-grey-7"},"Visa, Mastercard, etc.")],-1)),t(R),t(E,{"model-value":o(s).paymentMethod==="card",val:"card","onUpdate:modelValue":l[0]||(l[0]=i=>f("card"))},null,8,["model-value"])])]),_:1})]),_:1},8,["class"])]),e("div",We,[t(M,{flat:"",bordered:"",class:V(["payment-method-card cursor-pointer",{selected:o(s).paymentMethod==="mobile_money"}]),onClick:l[3]||(l[3]=i=>f("mobile_money"))},{default:d(()=>[t(P,{class:"q-pa-md"},{default:d(()=>[e("div",Ge,[t(p,{name:"phone_android",size:"32px",color:"primary",class:"q-mr-md"}),l[19]||(l[19]=e("div",null,[e("div",{class:"text-body1 text-weight-medium"},"Mobile Money"),e("div",{class:"text-caption text-grey-7"},"EcoCash, OneMoney, etc.")],-1)),t(R),t(E,{"model-value":o(s).paymentMethod==="mobile_money",val:"mobile_money","onUpdate:modelValue":l[2]||(l[2]=i=>f("mobile_money"))},null,8,["model-value"])])]),_:1})]),_:1},8,["class"])]),e("div",He,[t(M,{flat:"",bordered:"",class:V(["payment-method-card cursor-pointer",{selected:o(s).paymentMethod==="bank_transfer"}]),onClick:l[5]||(l[5]=i=>f("bank_transfer"))},{default:d(()=>[t(P,{class:"q-pa-md"},{default:d(()=>[e("div",Je,[t(p,{name:"account_balance",size:"32px",color:"primary",class:"q-mr-md"}),l[20]||(l[20]=e("div",null,[e("div",{class:"text-body1 text-weight-medium"},"Bank Transfer"),e("div",{class:"text-caption text-grey-7"},"Direct bank transfer")],-1)),t(R),t(E,{"model-value":o(s).paymentMethod==="bank_transfer",val:"bank_transfer","onUpdate:modelValue":l[4]||(l[4]=i=>f("bank_transfer"))},null,8,["model-value"])])]),_:1})]),_:1},8,["class"])]),e("div",Xe,[t(M,{flat:"",bordered:"",class:V(["payment-method-card cursor-pointer",{selected:o(s).paymentMethod==="cash_on_delivery"}]),onClick:l[7]||(l[7]=i=>f("cash_on_delivery"))},{default:d(()=>[t(P,{class:"q-pa-md"},{default:d(()=>[e("div",et,[t(p,{name:"money",size:"32px",color:"primary",class:"q-mr-md"}),l[21]||(l[21]=e("div",null,[e("div",{class:"text-body1 text-weight-medium"},"Cash on Delivery"),e("div",{class:"text-caption text-grey-7"},"Pay when you receive")],-1)),t(R),t(E,{"model-value":o(s).paymentMethod==="cash_on_delivery",val:"cash_on_delivery","onUpdate:modelValue":l[6]||(l[6]=i=>f("cash_on_delivery"))},null,8,["model-value"])])]),_:1})]),_:1},8,["class"])])])]),o(s).paymentMethod==="card"?(c(),_("div",tt,[t(B,{class:"q-mb-md"}),l[24]||(l[24]=e("div",{class:"text-body2 text-weight-medium q-mb-md"},"Card Details",-1)),t(O,{class:"q-gutter-md"},{default:d(()=>[t(S,{modelValue:u.value.card_number,"onUpdate:modelValue":[l[8]||(l[8]=i=>u.value.card_number=i),b],outlined:"",label:"Card Number *",placeholder:"1234 5678 9012 3456",mask:"#### #### #### ####",rules:[i=>!!i||"Card number is required",i=>i.replace(/\s/g,"").length===16||"Card number must be 16 digits"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"credit_card"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:u.value.cardholder_name,"onUpdate:modelValue":[l[9]||(l[9]=i=>u.value.cardholder_name=i),b],outlined:"",label:"Cardholder Name *",placeholder:"John Doe",rules:[i=>!!i||"Cardholder name is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"person"})]),_:1},8,["modelValue","rules","disable"]),e("div",st,[e("div",lt,[e("div",ot,[e("div",at,[t(S,{modelValue:u.value.expiry_month,"onUpdate:modelValue":[l[10]||(l[10]=i=>u.value.expiry_month=i),b],outlined:"",label:"Month *",placeholder:"MM",mask:"##",rules:[i=>!!i||"Required",i=>i>=1&&i<=12||"Invalid month"],"lazy-rules":"",disable:o(s).isLoading},null,8,["modelValue","rules","disable"])]),e("div",it,[t(S,{modelValue:u.value.expiry_year,"onUpdate:modelValue":[l[11]||(l[11]=i=>u.value.expiry_year=i),b],outlined:"",label:"Year *",placeholder:"YY",mask:"##",rules:[i=>!!i||"Required",i=>i>=24||"Card expired"],"lazy-rules":"",disable:o(s).isLoading},null,8,["modelValue","rules","disable"])])])]),e("div",dt,[t(S,{modelValue:u.value.cvv,"onUpdate:modelValue":[l[12]||(l[12]=i=>u.value.cvv=i),b],outlined:"",label:"CVV *",placeholder:"123",mask:"###",type:"password",rules:[i=>!!i||"CVV is required",i=>i.length===3||"CVV must be 3 digits"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"lock"})]),_:1},8,["modelValue","rules","disable"])])]),t(Z,{modelValue:h.value,"onUpdate:modelValue":l[13]||(l[13]=i=>h.value=i),label:"Save card for future purchases",color:"primary",disable:o(s).isLoading},null,8,["modelValue","disable"]),e("div",rt,[t(p,{name:"lock",color:"positive",size:"sm"}),l[23]||(l[23]=e("div",{class:"text-caption text-grey-7"}," Your payment information is secure and encrypted ",-1))])]),_:1})])):q("",!0),o(s).paymentMethod==="mobile_money"?(c(),_("div",nt,[t(B,{class:"q-mb-md"}),l[25]||(l[25]=e("div",{class:"text-body2 text-weight-medium q-mb-md"},"Mobile Money Details",-1)),t(O,{class:"q-gutter-md"},{default:d(()=>[t(G,{modelValue:g.value.mobile_money_provider,"onUpdate:modelValue":[l[14]||(l[14]=i=>g.value.mobile_money_provider=i),Q],outlined:"",label:"Mobile Money Provider *",options:T,"option-label":"label","option-value":"value","emit-value":"","map-options":"",rules:[i=>!!i||"Provider is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"phone_android"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:g.value.mobile_money_number,"onUpdate:modelValue":[l[15]||(l[15]=i=>g.value.mobile_money_number=i),Q],outlined:"",label:"Mobile Money Number *",placeholder:"0771234567",rules:[i=>!!i||"Mobile money number is required",i=>i.length>=9||"Please enter a valid mobile money number"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"phone"})]),_:1},8,["modelValue","rules","disable"])]),_:1})])):q("",!0),o(s).paymentMethod==="bank_transfer"?(c(),_("div",ut,[t(B,{class:"q-mb-md"}),l[27]||(l[27]=e("div",{class:"text-body2 text-weight-medium q-mb-md"},"Bank Transfer Details",-1)),t(O,{class:"q-gutter-md"},{default:d(()=>[t(S,{modelValue:k.value.bank_name,"onUpdate:modelValue":[l[16]||(l[16]=i=>k.value.bank_name=i),x],outlined:"",label:"Bank Name *",placeholder:"Enter bank name",rules:[i=>!!i||"Bank name is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"account_balance"})]),_:1},8,["modelValue","rules","disable"]),t(S,{modelValue:k.value.account_number,"onUpdate:modelValue":[l[17]||(l[17]=i=>k.value.account_number=i),x],outlined:"",label:"Account Number *",placeholder:"Enter account number",rules:[i=>!!i||"Account number is required"],"lazy-rules":"",disable:o(s).isLoading},{prepend:d(()=>[t(p,{name:"account_circle"})]),_:1},8,["modelValue","rules","disable"]),t(j,{rounded:"",class:"bg-info text-white"},{avatar:d(()=>[t(p,{name:"info"})]),default:d(()=>[l[26]||(l[26]=U(" You will receive bank transfer instructions after placing your order. ",-1))]),_:1})]),_:1})])):q("",!0),o(s).paymentMethod==="cash_on_delivery"?(c(),_("div",mt,[t(B,{class:"q-mb-md"}),t(j,{rounded:"",class:"bg-positive text-white"},{avatar:d(()=>[t(p,{name:"check_circle"})]),default:d(()=>[l[28]||(l[28]=U(" You will pay cash when you receive your order. No payment required now. ",-1))]),_:1})])):q("",!0),o(s).error&&o(s).currentStep===2?(c(),z(j,{key:4,rounded:"",class:"bg-negative text-white q-mt-md"},{avatar:d(()=>[t(p,{name:"error"})]),default:d(()=>[U(" "+y(o(s).error),1)]),_:1})):q("",!0)]),_:1})]),_:1})]))}},pt=D(ct,[["__scopeId","data-v-5911b014"]]),vt={class:"review-step"},bt={class:"row q-col-gutter-md"},yt={class:"col-auto"},_t={class:"col"},gt={class:"text-body2 text-weight-medium q-mb-xs"},ht={class:"text-caption text-grey-7 q-mb-xs"},xt={class:"text-body2 text-primary text-weight-bold"},ft={class:"row items-center justify-between q-mb-sm"},kt={class:"text-body2"},wt={class:"text-weight-medium"},qt={key:0},St={key:0},$t={class:"q-mt-xs"},Vt={class:"row items-center justify-between q-mb-sm"},Ct={class:"row items-center"},Pt={class:"text-body2 text-weight-medium"},Mt={key:0,class:"text-caption text-grey-7"},zt={class:"row items-center justify-between"},Tt={class:"text-caption text-grey-7"},It={class:"text-caption text-grey-7"},At={class:"text-body2 text-weight-bold"},Ut={class:"row items-center justify-between q-mb-sm"},Lt={class:"text-body2 text-weight-medium"},Bt={class:"row items-center justify-between q-mb-sm"},Qt={class:"text-body2 text-weight-medium"},Ft={class:"row items-center justify-between q-mb-sm"},Nt={class:"text-body2 text-weight-medium"},jt={key:0,class:"row items-center justify-between q-mb-sm"},Dt={class:"text-body2 text-weight-medium text-positive"},Rt={class:"row items-center justify-between"},Et={class:"text-h5 text-primary text-weight-bold"},Ot={class:"row items-center justify-center q-mt-md q-gutter-xs"},Zt={__name:"ReviewStep",setup(m){const v=Y(),s=se(),u=I(!1),g=F(()=>v.orderSummary),k=a=>a.product?.primary_image||a.product?.image||a.product?.image_url||a.product?.thumbnail||"https://via.placeholder.com/200",h=a=>a.product?.name||a.product?.title||"Product",T=a=>a.product?.brand||a.product?.manufacturer||"ProudlyZimmart",C=a=>`$${(a.price||a.product?.current_price_usd||a.product?.price_usd||a.product?.price||0).toFixed(2)}`,f=a=>{const r=a.price||a.product?.current_price_usd||a.product?.price_usd||a.product?.price||0,l=a.quantity||1;return`$${(r*l).toFixed(2)}`},$=()=>{const a=v.paymentMethod;return{card:"credit_card",mobile_money:"phone_android",bank_transfer:"account_balance",cash_on_delivery:"money"}[a]||"payment"},b=()=>{const a=v.paymentMethod;return{card:"Credit/Debit Card",mobile_money:"Mobile Money",bank_transfer:"Bank Transfer",cash_on_delivery:"Cash on Delivery"}[a]||"Payment Method"},n=()=>{const a=v.paymentMethod,r=v.paymentDetails;return a==="card"&&r.card_number?`**** **** **** ${r.card_number.slice(-4)}`:a==="mobile_money"&&r.mobile_money_number?`${r.mobile_money_provider}: ${r.mobile_money_number}`:a==="bank_transfer"&&r.bank_name?`${r.bank_name} - ${r.account_number}`:null},Q=()=>{v.goToStep(1)},L=()=>{v.goToStep(2)},x=async()=>{if(!u.value){K.create({type:"negative",message:"Please accept the Terms and Conditions to continue",position:"top"});return}try{await v.createOrder(),v.orderId&&s.push({name:"checkout-confirmation",params:{orderId:v.orderId}})}catch(a){console.error("Error placing order:",a)}};return(a,r)=>(c(),_("div",vt,[t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[r[1]||(r[1]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"Order Items",-1)),(c(!0),_(le,null,oe(g.value.items,(l,i)=>(c(),_("div",{key:l.product_id||l.product?.id||i,class:V(["order-item-row",{"q-mb-md":i<g.value.items.length-1}])},[e("div",bt,[e("div",yt,[t(ae,{src:k(l),alt:h(l),ratio:"1",class:"order-item-image",style:{width:"80px",height:"80px","border-radius":"8px"}},null,8,["src","alt"])]),e("div",_t,[e("div",gt,y(h(l)),1),e("div",ht,y(T(l)),1),e("div",xt,y(C(l))+" × "+y(l.quantity||1)+" = "+y(f(l)),1)])])],2))),128))]),_:1})]),_:1}),t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[e("div",ft,[r[2]||(r[2]=e("div",{class:"text-h6 text-weight-bold"},"Shipping Address",-1)),t(A,{flat:"",dense:"",color:"primary",label:"Edit",icon:"edit",size:"sm",onClick:Q})]),e("div",kt,[e("div",wt,y(o(v).shippingAddress.full_name),1),e("div",null,y(o(v).shippingAddress.address_line_1),1),o(v).shippingAddress.address_line_2?(c(),_("div",qt,y(o(v).shippingAddress.address_line_2),1)):q("",!0),e("div",null,[U(y(o(v).shippingAddress.city)+", ",1),o(v).shippingAddress.state?(c(),_("span",St,y(o(v).shippingAddress.state)+", ",1)):q("",!0),U(" "+y(o(v).shippingAddress.postal_code),1)]),e("div",null,y(o(v).shippingAddress.country),1),e("div",$t,[t(p,{name:"phone",size:"sm",class:"q-mr-xs"}),U(" "+y(o(v).shippingAddress.phone),1)]),e("div",null,[t(p,{name:"email",size:"sm",class:"q-mr-xs"}),U(" "+y(o(v).shippingAddress.email),1)])])]),_:1})]),_:1}),t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[e("div",Vt,[r[3]||(r[3]=e("div",{class:"text-h6 text-weight-bold"},"Payment Method",-1)),t(A,{flat:"",dense:"",color:"primary",label:"Edit",icon:"edit",size:"sm",onClick:L})]),e("div",Ct,[t(p,{name:$(),size:"24px",color:"primary",class:"q-mr-md"},null,8,["name"]),e("div",null,[e("div",Pt,y(b()),1),n()?(c(),_("div",Mt,y(n()),1)):q("",!0)])])]),_:1})]),_:1}),t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[e("div",zt,[e("div",null,[r[4]||(r[4]=e("div",{class:"text-body2 text-weight-medium"},"Shipping Method",-1)),e("div",Tt,y(o(v).shippingMethod?.name||"Standard Shipping"),1),e("div",It," Estimated delivery: "+y(o(v).shippingMethod?.estimated_days||"5-7")+" days ",1)]),e("div",At," $"+y(g.value.shipping.toFixed(2)),1)])]),_:1})]),_:1}),t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[r[10]||(r[10]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"Price Summary",-1)),e("div",Ut,[r[5]||(r[5]=e("div",{class:"text-body2 text-grey-7"},"Subtotal",-1)),e("div",Lt,"$"+y(g.value.subtotal.toFixed(2)),1)]),e("div",Bt,[r[6]||(r[6]=e("div",{class:"text-body2 text-grey-7"},"Shipping",-1)),e("div",Qt,"$"+y(g.value.shipping.toFixed(2)),1)]),e("div",Ft,[r[7]||(r[7]=e("div",{class:"text-body2 text-grey-7"},"Tax",-1)),e("div",Nt,"$"+y(g.value.tax.toFixed(2)),1)]),g.value.discount>0?(c(),_("div",jt,[r[8]||(r[8]=e("div",{class:"text-body2 text-positive"},"Discount",-1)),e("div",Dt," -$"+y(g.value.discount.toFixed(2)),1)])):q("",!0),t(B,{class:"q-my-md"}),e("div",Rt,[r[9]||(r[9]=e("div",{class:"text-h6 text-weight-bold"},"Total",-1)),e("div",Et," $"+y(g.value.total.toFixed(2)),1)])]),_:1})]),_:1}),t(M,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[t(P,null,{default:d(()=>[t(Z,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=l=>u.value=l),label:"I agree to the Terms and Conditions and Privacy Policy",color:"primary",disable:o(v).isSubmitting},null,8,["modelValue","disable"])]),_:1})]),_:1}),o(v).error&&o(v).currentStep===3?(c(),z(j,{key:0,rounded:"",class:"bg-negative text-white q-mb-md"},{avatar:d(()=>[t(p,{name:"error"})]),action:d(()=>[t(A,{flat:"",label:"Retry",onClick:x})]),default:d(()=>[U(" "+y(o(v).error)+" ",1)]),_:1})):q("",!0),t(A,{unelevated:"",color:"primary",label:"Place Order",icon:"shopping_cart",class:"full-width",size:"lg",loading:o(v).isSubmitting,disable:!u.value||o(v).isSubmitting,onClick:x},null,8,["loading","disable"]),e("div",Ot,[t(p,{name:"lock",color:"positive",size:"sm"}),r[11]||(r[11]=e("div",{class:"text-caption text-grey-7"},"Secure checkout • SSL encrypted",-1))])]))}},Kt=D(Zt,[["__scopeId","data-v-90668067"]]),Yt={class:"constrain q-pa-md"},Wt={class:"row items-center q-mb-lg"},Gt={key:0,class:"text-center q-pa-xl"},Ht={key:1,class:"row q-col-gutter-lg"},Jt={class:"col-12 col-lg-8"},Xt={key:0},es={class:"row justify-end q-mt-md"},ts={key:1},ss={class:"row justify-between q-mt-md"},ls={key:2},os={class:"col-12 col-lg-4"},as={class:"q-mb-md"},is={class:"col q-ml-sm"},ds={class:"text-caption text-weight-medium",style:{"line-height":"1.2"}},rs={class:"text-caption text-grey-7"},ns={key:0,class:"text-caption text-grey-7 text-center q-mt-sm"},us={class:"q-gutter-y-sm"},ms={class:"row items-center justify-between"},cs={class:"text-body2 text-weight-medium"},ps={class:"row items-center justify-between"},vs={class:"text-body2 text-weight-medium"},bs={key:0},ys={key:1},_s={class:"row items-center justify-between"},gs={class:"text-body2 text-weight-medium"},hs={key:0,class:"row items-center justify-between"},xs={class:"text-body2 text-weight-medium text-positive"},fs={class:"row items-center justify-between q-mb-md"},ks={class:"text-h5 text-primary text-weight-bold"},ws={key:0},qs={class:"row q-col-gutter-xs"},Ss={class:"col"},$s={class:"col-auto"},Vs={key:0,class:"text-caption text-positive q-mt-xs"},Cs={class:"text-center"},Ps={class:"row items-center justify-center q-gutter-md q-mb-sm"},Ms={class:"text-center"},zs={class:"text-center"},Ts={class:"text-center"},Is={class:"row items-center justify-center q-gutter-xs"},As={__name:"IndexPage",setup(m){const v=se(),s=Y(),u=I(null),g=I(null),k=I(""),h=F(()=>s.orderSummary),T=x=>x.product?.primary_image||x.product?.image||x.product?.image_url||x.product?.thumbnail||"https://via.placeholder.com/200",C=x=>x.product?.name||x.product?.title||"Product",f=x=>`$${(x.price||x.product?.current_price_usd||x.product?.price_usd||x.product?.price||0).toFixed(2)}`,$=()=>{u.value&&u.value.onSubmit?u.value.onSubmit():s.proceedToNextStep()},b=()=>{g.value&&g.value.onSubmit?g.value.onSubmit():s.proceedToNextStep()},n=async()=>{if(k.value)try{await s.applyPromoCode(k.value)}catch{}},Q=()=>{s.removePromoCode(),k.value=""},L=()=>{s.currentStep>1?s.goToStep(s.currentStep-1):v.push("/cart")};return ee(async()=>{try{await s.initCheckout()}catch(x){K.create({type:"negative",message:x.message||"Failed to initialize checkout",position:"top"}),v.push("/cart")}}),(x,a)=>(c(),z(ye,{class:"bg-grey-1"},{default:d(()=>[e("div",Yt,[e("div",Wt,[t(A,{flat:"",dense:"",icon:"arrow_back",onClick:L,class:"q-mr-sm"}),a[2]||(a[2]=e("div",{class:"text-h5 text-weight-bold"},"Checkout",-1))]),o(s).isLoading&&o(s).currentStep===1?(c(),_("div",Gt,[t(ce,{color:"primary",size:"3em"}),a[3]||(a[3]=e("div",{class:"text-body2 text-grey-7 q-mt-md"},"Loading checkout...",-1))])):(c(),_("div",Ht,[e("div",Jt,[t(Ie,{"current-step":o(s).currentStep},null,8,["current-step"]),o(s).currentStep===1?(c(),_("div",Xt,[t(De,{ref_key:"shippingStepRef",ref:u},null,512),e("div",es,[t(A,{unelevated:"",color:"primary",label:"Continue to Payment","icon-right":"arrow_forward",loading:o(s).isLoading,disable:!o(s).canProceedToPayment,onClick:$},null,8,["loading","disable"])])])):q("",!0),o(s).currentStep===2?(c(),_("div",ts,[t(pt,{ref_key:"paymentStepRef",ref:g},null,512),e("div",ss,[t(A,{outline:"",color:"primary",label:"Back to Shipping",icon:"arrow_back",onClick:a[0]||(a[0]=r=>o(s).goToStep(1))}),t(A,{unelevated:"",color:"primary",label:"Continue to Review","icon-right":"arrow_forward",loading:o(s).isLoading,disable:!o(s).canProceedToReview,onClick:b},null,8,["loading","disable"])])])):q("",!0),o(s).currentStep===3?(c(),_("div",ls,[t(Kt)])):q("",!0)]),e("div",os,[t(M,{flat:"",bordered:"",class:"sticky-summary"},{default:d(()=>[t(P,null,{default:d(()=>[a[14]||(a[14]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"Order Summary",-1)),e("div",as,[(c(!0),_(le,null,oe(h.value.items.slice(0,3),(r,l)=>(c(),_("div",{key:r.product_id||r.product?.id||l,class:"row items-center q-mb-sm"},[t(ae,{src:T(r),alt:C(r),ratio:"1",class:"summary-item-image",style:{width:"50px",height:"50px","border-radius":"4px"}},null,8,["src","alt"]),e("div",is,[e("div",ds,y(C(r)),1),e("div",rs," Qty: "+y(r.quantity||1)+" × "+y(f(r)),1)])]))),128)),h.value.items.length>3?(c(),_("div",ns," +"+y(h.value.items.length-3)+" more item"+y(h.value.items.length-3>1?"s":""),1)):q("",!0)]),t(B,{class:"q-my-md"}),e("div",us,[e("div",ms,[a[4]||(a[4]=e("div",{class:"text-body2 text-grey-7"},"Subtotal",-1)),e("div",cs,"$"+y(h.value.subtotal.toFixed(2)),1)]),e("div",ps,[a[5]||(a[5]=e("div",{class:"text-body2 text-grey-7"},"Shipping",-1)),e("div",vs,[h.value.shipping===0?(c(),_("span",bs,"Free")):(c(),_("span",ys,"$"+y(h.value.shipping.toFixed(2)),1))])]),e("div",_s,[a[6]||(a[6]=e("div",{class:"text-body2 text-grey-7"},"Tax",-1)),e("div",gs,"$"+y(h.value.tax.toFixed(2)),1)]),h.value.discount>0?(c(),_("div",hs,[a[7]||(a[7]=e("div",{class:"text-body2 text-positive"},"Discount",-1)),e("div",xs," -$"+y(h.value.discount.toFixed(2)),1)])):q("",!0)]),t(B,{class:"q-my-md"}),e("div",fs,[a[8]||(a[8]=e("div",{class:"text-h6 text-weight-bold"},"Total",-1)),e("div",ks," $"+y(h.value.total.toFixed(2)),1)]),o(s).currentStep===1||o(s).currentStep===2?(c(),_("div",ws,[t(B,{class:"q-my-md"}),a[9]||(a[9]=e("div",{class:"text-body2 text-weight-medium q-mb-xs"},"Promo Code",-1)),e("div",qs,[e("div",Ss,[t(S,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=r=>k.value=r),dense:"",outlined:"",placeholder:"Enter code",disable:o(s).isLoading||!!o(s).appliedPromoCode,onKeyup:pe(n,["enter"])},null,8,["modelValue","disable"])]),e("div",$s,[o(s).appliedPromoCode?(c(),z(A,{key:1,flat:"",dense:"",icon:"close",color:"negative",onClick:Q})):(c(),z(A,{key:0,unelevated:"",color:"primary",label:"Apply",dense:"",disable:!k.value||o(s).isLoading,onClick:n},null,8,["disable"]))])]),o(s).appliedPromoCode?(c(),_("div",Vs,' Promo code "'+y(o(s).appliedPromoCode)+'" applied ',1)):q("",!0)])):q("",!0),t(B,{class:"q-my-md"}),e("div",Cs,[e("div",Ps,[e("div",Ms,[t(p,{name:"local_shipping",color:"primary",size:"md"}),a[10]||(a[10]=e("div",{class:"text-caption text-primary text-weight-medium q-mt-xs"}," Free shipping over $50 ",-1))]),e("div",zs,[t(p,{name:"refresh",color:"primary",size:"md"}),a[11]||(a[11]=e("div",{class:"text-caption text-primary text-weight-medium q-mt-xs"},"Easy returns",-1))]),e("div",Ts,[t(p,{name:"verified",color:"primary",size:"md"}),a[12]||(a[12]=e("div",{class:"text-caption text-primary text-weight-medium q-mt-xs"},"Secure payment",-1))])]),e("div",Is,[t(p,{name:"lock",color:"positive",size:"sm"}),a[13]||(a[13]=e("div",{class:"text-caption text-grey-7"},"SSL Encrypted",-1))])])]),_:1})]),_:1})])]))])]),_:1}))}},al=D(As,[["__scopeId","data-v-3164ba2f"]]);export{al as default};
