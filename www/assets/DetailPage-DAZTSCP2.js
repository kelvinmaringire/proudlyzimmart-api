import{r as b,c as $,o as N,m as M,n as l,p as r,I as U,q as V,C as i,x as u,A as c,v as e,f as o,J as H,y as p,B as n,Q as m,a1 as O,z as h,F as J,E as j}from"./index-CUBQy48D.js";import{Q as B}from"./QImg-B8fmnvHW.js";import{Q as f}from"./QCard-DZMDY_Ca.js";import{Q as y}from"./QTooltip-D_vE3Fzw.js";import{Q as G}from"./QCardSection-DxIQyhwE.js";import{Q as K}from"./QPage-DqzRJpM6.js";import{u as W,a as X,b as Y,d as Z,e as tt,c as et}from"./useBlogUtils-Df9Z-7qP.js";import{u as ot}from"./use-quasar-BjRZkzXU.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-timeout-sN3gBUuD.js";import"./use-dark-yr8oZmB6.js";import"./position-engine-BHw6Gt0E.js";import"./focus-manager-BJWzFvJg.js";const at={key:0,class:"constrain q-pa-xl"},rt={class:"text-center"},lt={key:1,class:"constrain q-pa-xl"},it={class:"text-center"},nt={class:"text-h6 text-grey-7 q-mt-md"},ct={key:2,class:"blog-detail"},dt={class:"hero-image-container"},ut={class:"absolute-full flex flex-center bg-grey-3 text-grey-8"},mt={class:"text-center"},pt={class:"absolute-full bg-dark text-white flex flex-center"},vt={class:"constrain text-center q-pa-lg"},_t={class:"text-h4 text-weight-bold q-mb-md"},gt={key:0,class:"text-h6 text-white text-opacity-90"},xt={class:"constrain q-pa-md"},ht={class:"post-meta q-mb-lg"},yt={class:"row items-center q-gutter-md flex-wrap"},bt={key:0,class:"row items-center q-gutter-xs"},ft={class:"text-body2 text-weight-medium"},wt={key:1,class:"row items-center q-gutter-xs"},kt={class:"text-body2 text-grey-7"},qt={class:"row items-center q-gutter-xs"},Ct={class:"text-body2 text-grey-7"},Qt=["innerHTML"],Bt={key:1,class:"text-body1 text-grey-7"},It={class:"text-body1",style:{"line-height":"1.8"}},St={key:2,class:"text-body1 text-grey-7"},Et={class:"row q-gutter-sm"},Lt={key:0,class:"related-posts q-mt-xl"},Tt={class:"row q-col-gutter-md"},zt={class:"text-body2 text-weight-bold q-mb-xs"},Dt={key:0,class:"text-caption text-grey-7"},Pt={__name:"DetailPage",setup(At){const I=U(),S=V(),v=W(),w=ot(),a=b(null),_=b(null),g=b([]),k=$(()=>I.params.id);N(async()=>{await E(),await L()});const E=async()=>{try{_.value=null;const s=await v.fetchPostDetails(k.value);a.value=s}catch(s){_.value=s.response?.data?.detail||s.response?.data?.message||"Failed to load blog post. Please try again.",console.error("Error loading post:",s)}},L=async()=>{try{await v.fetchPosts({filters:{page_size:3}}),g.value=v.posts.filter(s=>s.id!==parseInt(k.value)).slice(0,3)}catch(s){console.error("Error loading related posts:",s),g.value=[]}},T=s=>{S.push(`/stories/${s}`)},q=Y,z=Z,D=tt,P=et,C=X,x=()=>window.location.href,A=async()=>{if(navigator.share)try{await navigator.share({title:a.value?.title,text:a.value?.excerpt||"",url:x()})}catch(s){s.name!=="AbortError"&&console.error("Error sharing:",s)}else Q()},F=()=>{const s=encodeURIComponent(x());window.open(`https://www.facebook.com/sharer/sharer.php?u=${s}`,"_blank")},R=()=>{const s=encodeURIComponent(x()),t=encodeURIComponent(a.value?.title||"");window.open(`https://twitter.com/intent/tweet?url=${s}&text=${t}`,"_blank")},Q=()=>{const s=x();if(navigator.clipboard)navigator.clipboard.writeText(s).then(()=>{w.notify({type:"positive",message:"Link copied to clipboard!",position:"top",timeout:2e3})});else{const t=document.createElement("textarea");t.value=s,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),w.notify({type:"positive",message:"Link copied to clipboard!",position:"top",timeout:2e3})}};return(s,t)=>(l(),M(K,{class:"bg-white"},{default:r(()=>[c(v).isLoadingDetails?(l(),i("div",at,[e("div",rt,[o(H,{color:"primary",size:"3em"}),t[0]||(t[0]=e("div",{class:"text-h6 text-grey-7 q-mt-md"},"Loading story...",-1))])])):_.value?(l(),i("div",lt,[e("div",it,[o(p,{name:"error_outline",size:"80px",color:"negative"}),e("div",nt,n(_.value),1),o(m,{unelevated:"",color:"primary",label:"Back to Stories",class:"q-mt-lg","no-caps":"",to:"/stories"})])])):a.value?(l(),i("div",ct,[e("div",dt,[o(B,{src:c(q)(a.value),alt:a.value.title,ratio:"21/9",class:"hero-image",onError:c(C)},{error:r(()=>[e("div",ut,[e("div",mt,[o(p,{name:"image_not_supported",size:"64px"}),t[1]||(t[1]=e("div",{class:"text-body1 q-mt-sm"},"Image not available",-1))])])]),default:r(()=>[e("div",pt,[e("div",vt,[e("div",_t,n(a.value.title),1),a.value.excerpt?(l(),i("div",gt,n(a.value.excerpt),1)):u("",!0)])])]),_:1},8,["src","alt","onError"])]),e("div",xt,[o(m,{flat:"",color:"primary",icon:"arrow_back",label:"Back to Stories",class:"q-mb-md","no-caps":"",to:"/stories"}),e("div",ht,[e("div",yt,[a.value.author||a.value.author_name?(l(),i("div",bt,[o(O,{size:"32px",color:"primary","text-color":"white"},{default:r(()=>[o(p,{name:"person"})]),_:1}),e("div",ft,n(c(z)(a.value)),1)])):u("",!0),a.value.published_date?(l(),i("div",wt,[o(p,{name:"calendar_today",size:"sm",color:"grey-6"}),e("div",kt,n(c(D)(a.value.published_date)),1)])):u("",!0),e("div",qt,[o(p,{name:"visibility",size:"sm",color:"grey-6"}),e("div",Ct,n(a.value.view_count||0)+" "+n((a.value.view_count||0)===1?"view":"views"),1)])])]),o(f,{flat:"",class:"post-content-card q-pa-lg"},{default:r(()=>[a.value.content?(l(),i("div",{key:0,class:"blog-content",innerHTML:a.value.content},null,8,Qt)):a.value.excerpt?(l(),i("div",Bt,[t[2]||(t[2]=e("div",{class:"text-h6 q-mb-md text-weight-bold"},"Story Summary",-1)),e("p",It,n(a.value.excerpt),1),t[3]||(t[3]=e("div",{class:"text-caption text-grey-6 q-mt-md"}," Full content will be available soon. ",-1))])):(l(),i("div",St," Content not available. "))]),_:1}),o(f,{flat:"",class:"share-card q-pa-md q-mt-lg"},{default:r(()=>[t[8]||(t[8]=e("div",{class:"text-subtitle2 text-weight-bold q-mb-md"},"Share this story",-1)),e("div",Et,[o(m,{round:"",color:"primary",icon:"share",onClick:A},{default:r(()=>[o(y,null,{default:r(()=>[...t[4]||(t[4]=[h("Share",-1)])]),_:1})]),_:1}),o(m,{round:"",color:"blue",icon:"facebook",onClick:F},{default:r(()=>[o(y,null,{default:r(()=>[...t[5]||(t[5]=[h("Share on Facebook",-1)])]),_:1})]),_:1}),o(m,{round:"",color:"light-blue",icon:"twitter",onClick:R},{default:r(()=>[o(y,null,{default:r(()=>[...t[6]||(t[6]=[h("Share on Twitter",-1)])]),_:1})]),_:1}),o(m,{round:"",color:"red",icon:"link",onClick:Q},{default:r(()=>[o(y,null,{default:r(()=>[...t[7]||(t[7]=[h("Copy Link",-1)])]),_:1})]),_:1})])]),_:1}),g.value.length>0?(l(),i("div",Lt,[t[9]||(t[9]=e("div",{class:"text-h6 text-weight-bold q-mb-md"},"More Stories",-1)),e("div",Tt,[(l(!0),i(J,null,j(g.value,d=>(l(),i("div",{key:d.id,class:"col-12 col-sm-6 col-md-4"},[o(f,{class:"related-post-card cursor-pointer",flat:"",bordered:"",onClick:Ft=>T(d.id)},{default:r(()=>[o(B,{src:c(q)(d),alt:d.title,ratio:"16/9",class:"related-post-image",onError:c(C)},null,8,["src","alt","onError"]),o(G,{class:"q-pa-md"},{default:r(()=>[e("div",zt,n(d.title),1),d.excerpt?(l(),i("div",Dt,n(c(P)(d.excerpt,80)),1)):u("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])])):u("",!0)])])):u("",!0)]),_:1}))}},Xt=st(Pt,[["__scopeId","data-v-246a6e4a"]]);export{Xt as default};
