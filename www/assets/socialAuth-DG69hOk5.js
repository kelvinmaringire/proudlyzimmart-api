function c(){return new Promise((n,r)=>{if(window.google){n();return}const o=document.createElement("script");o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.onload=()=>n(),o.onerror=()=>r(new Error("Failed to load Google Identity Services")),document.head.appendChild(o)})}function t(n,r,o){try{console.log("=== Google Token Client Initialization ==="),console.log("Client ID:",n?`${n.substring(0,20)}...`:"NOT SET");const l=window.google.accounts.oauth2.initTokenClient({client_id:n,scope:"email profile",callback:e=>{console.log("=== Google OAuth Callback ==="),console.log("Response Object:",e),console.log("Has access_token:",!!e.access_token),console.log("Has error:",!!e.error),console.log("Full Response:",JSON.stringify(e,null,2)),e.access_token?(console.log("Access Token (first 30 chars):",e.access_token.substring(0,30)),r(e.access_token)):(console.error("Google sign-in failed - no access_token in response"),console.error("Error details:",e.error||"Unknown error"),o(new Error(e.error||"Google sign-in failed")))}});console.log("Requesting access token from Google..."),l.requestAccessToken()}catch(l){console.error("Google Token Client Error:",l),o(l)}}async function s(n){return await c(),new Promise((r,o)=>{t(n,r,o)})}export{s};
