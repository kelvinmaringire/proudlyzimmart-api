import{k as Q,r as n,c as f,m as k,n as b,p as l,q as V,v as r,f as a,C as q,x as S,y as u,B as N,Q as h}from"./index-Btp_LviN.js";import{Q as g}from"./QInput-BmIudfcp.js";import{Q as B}from"./QLinearProgress-CXoNQpeb.js";import{Q as z}from"./QForm-Cgr1mS7P.js";import{Q as $}from"./QCardSection-DYSmIbuQ.js";import{Q as E}from"./QCard-eEP12_XI.js";import{Q as I}from"./QPage-M0-PEYmf.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-COX_BI4o.js";import"./focus-manager-BJWzFvJg.js";const A={class:"row justify-center"},L={class:"col-12 col-md-8 col-lg-6"},M={key:0,class:"q-mt-xs"},T={class:"text-caption text-grey-6 q-mt-xs"},j={class:"row q-gutter-md q-mt-lg"},D={class:"col"},F={class:"col-auto"},R={__name:"ChangePasswordPage",setup(W){const _=V(),y=Q(),i=n(""),o=n(""),p=n(""),m=n(!1),v=n(!1),c=n(!1),w=f(()=>y.isLoading),d=f(()=>{if(!o.value)return 0;let t=0;return o.value.length>=8&&(t+=.2),o.value.length>=12&&(t+=.1),/[A-Z]/.test(o.value)&&(t+=.2),/[a-z]/.test(o.value)&&(t+=.2),/[0-9]/.test(o.value)&&(t+=.2),/[!@#$%^&*]/.test(o.value)&&(t+=.2),Math.min(t,1)}),P=f(()=>d.value<.4?"negative":d.value<.7?"warning":"positive"),C=f(()=>d.value<.4?"Weak":d.value<.7?"Medium":"Strong"),x=async()=>{try{await y.changePassword({old_password:i.value,new_password1:o.value,new_password2:p.value}),i.value="",o.value="",p.value="",setTimeout(()=>{_.push("/profile")},2e3)}catch(t){console.error("Change password error:",t)}};return(t,s)=>(b(),k(I,{class:"q-pa-md"},{default:l(()=>[r("div",A,[r("div",L,[s[7]||(s[7]=r("div",{class:"text-h5 text-weight-bold q-mb-md"},"Change Password",-1)),a(E,{class:"shadow-2",flat:""},{default:l(()=>[a($,null,{default:l(()=>[a(z,{onSubmit:x,class:"q-gutter-y-md"},{default:l(()=>[a(g,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),type:m.value?"text":"password",outlined:"",label:"Current Password",placeholder:"Enter your current password",autocomplete:"current-password",rules:[e=>!!e||"Current password is required"],"lazy-rules":"",disable:w.value},{prepend:l(()=>[a(u,{name:"lock"})]),append:l(()=>[a(u,{name:m.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[0]||(s[0]=e=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),a(g,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value=e),type:v.value?"text":"password",outlined:"",label:"New Password",placeholder:"Enter your new password",autocomplete:"new-password",rules:[e=>!!e||"New password is required",e=>e.length>=8||"Password must be at least 8 characters",e=>e!==i.value||"New password must be different"],"lazy-rules":"",disable:w.value},{prepend:l(()=>[a(u,{name:"lock"})]),append:l(()=>[a(u,{name:v.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>v.value=!v.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),o.value?(b(),q("div",M,[s[6]||(s[6]=r("div",{class:"text-caption"},"Password strength:",-1)),a(B,{value:d.value,color:P.value,class:"q-mt-xs",rounded:""},null,8,["value","color"]),r("div",T,N(C.value),1)])):S("",!0),a(g,{modelValue:p.value,"onUpdate:modelValue":s[5]||(s[5]=e=>p.value=e),type:c.value?"text":"password",outlined:"",label:"Confirm New Password",placeholder:"Confirm your new password",autocomplete:"new-password",rules:[e=>!!e||"Please confirm your password",e=>e===o.value||"Passwords do not match"],"lazy-rules":"",disable:w.value},{prepend:l(()=>[a(u,{name:"lock"})]),append:l(()=>[a(u,{name:c.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[4]||(s[4]=e=>c.value=!c.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),r("div",j,[r("div",D,[a(h,{type:"submit",color:"primary",class:"full-width",label:"Change Password",loading:w.value},null,8,["loading"])]),r("div",F,[a(h,{flat:"",color:"primary",label:"Cancel",to:"/profile"})])])]),_:1})]),_:1})]),_:1})])])]),_:1}))}},ae=U(R,[["__scopeId","data-v-386b799f"]]);export{ae as default};
