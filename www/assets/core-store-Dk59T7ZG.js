import{X as c,Y as o,N as l}from"./index-Btp_LviN.js";const g=300*1e3,i=(s,t)=>{l.create({type:s,message:t,position:"top",timeout:4e3})},r=(s,t,a=!1)=>{const e=s.response?.data?.detail||s.response?.data?.message;return e||(a&&s.message?s.message:t)},u=c("core",{state:()=>({settings:null,isLoading:!1,isSubmitting:!1,error:null,lastFetchedAt:null}),actions:{async fetchSettings({force:s=!1}={}){const t=Date.now();if(!s&&this.settings&&this.lastFetchedAt&&t-this.lastFetchedAt<g)return this.settings;this.isLoading=!0,this.error=null;try{const e=await o.get("/api/core/settings/");return this.settings=e.data,this.lastFetchedAt=Date.now(),this.settings}catch(e){const n=r(e,"Failed to load site settings.",!0);throw this.error=n,i("negative",n),e}finally{this.isLoading=!1}},async submitContactForm(s){this.isSubmitting=!0;try{const t=await o.post("/api/core/contact/",s);return i("positive",t.data?.detail||"Message sent successfully."),t.data}catch(t){const a=r(t,"Failed to send your message. Please try again.");throw i("negative",a),t}finally{this.isSubmitting=!1}}}});export{u};
