import{r as z,c as p,w as A,o as T,I as E,m as c,n as a,p as l,q as j,v as o,f as s,C as n,x as u,Q as _,A as h,J as C,y as d,z as y,B as m,F as H,E as R}from"./index-CUBQy48D.js";import{Q as M}from"./QImg-B8fmnvHW.js";import{Q as G}from"./QChip-FfYl9lOC.js";import{Q as g}from"./QCardSection-DxIQyhwE.js";import{Q as b}from"./QCard-DZMDY_Ca.js";import{Q as x}from"./QTooltip-D_vE3Fzw.js";import{Q as J}from"./QPage-DqzRJpM6.js";import{u as U}from"./manufacturers-store-C0bwmgms.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-timeout-sN3gBUuD.js";import"./use-dark-yr8oZmB6.js";import"./position-engine-BHw6Gt0E.js";import"./focus-manager-BJWzFvJg.js";const Z={class:"constrain q-pa-xs q-pt-sm"},K={key:0,class:"text-center q-pa-xl"},O={key:1,class:"text-center q-pa-xl"},X={key:2,class:"row q-col-gutter-sm"},Y={class:"col-12 col-md-5 col-lg-4"},ee={class:"manufacturer-logo-large-container"},te={class:"full-width full-height flex flex-center bg-grey-2"},re={class:"row items-center q-mb-xs"},se={class:"text-h6 text-weight-bold"},ae={key:0,class:"text-body2 text-grey-7 q-mb-sm"},oe={key:0,class:"row items-center q-mb-sm"},le=["href"],ie={key:1,class:"row items-center q-mb-sm"},ne=["href"],ue={key:2,class:"row items-center q-mb-sm"},ce=["href"],de={key:3,class:"row items-start q-mb-sm"},me={class:"text-body2"},fe={key:4,class:"row items-center"},ve={class:"text-body2"},_e={class:"row q-gutter-sm"},pe={class:"col-12 col-md-7 col-lg-8"},ye=["innerHTML"],ge={class:"row items-center justify-between q-mb-sm"},be={class:"text-subtitle2 text-weight-bold"},xe={key:0,class:"text-grey-7"},he={key:0,class:"text-center q-pa-md"},ke={key:1,class:"text-center q-pa-md"},we={key:2,class:"row q-col-gutter-xs"},qe={class:"text-caption text-weight-medium q-mb-xs product-title"},Qe={key:0,class:"text-body2 text-primary text-weight-bold"},Pe={key:1,class:"text-caption text-grey-7"},ze={__name:"DetailPage",setup(Ce){const k=E(),L=j(),f=U(),e=z(null),v=z([]),w=p(()=>e.value?.name||"Manufacturer"),B=p(()=>e.value?.logo||e.value?.logo_url||e.value?.image||e.value?.image_url||"https://via.placeholder.com/400"),$=p(()=>e.value?.description||e.value?.bio||e.value?.short_description||"No description available."),q=p(()=>{if(!e.value)return"";const r=[];return e.value.city&&r.push(e.value.city),e.value.province&&r.push(e.value.province),e.value.country&&r.push(e.value.country),r.join(", ")||"Zimbabwe"}),I=p(()=>e.value?!!(e.value.facebook_url||e.value.instagram_url||e.value.twitter_url||e.value.linkedin_url):!1),D=p(()=>v.value.slice(0,8)),F=r=>r.primary_image||r.image||r.image_url||r.thumbnail||"https://via.placeholder.com/500",Q=r=>r.current_price_usd||r.price_usd||r.price||null,N=r=>{const t=Q(r);return t?`$${parseFloat(t).toFixed(2)}`:null};A(()=>k.params.id,async r=>{r&&await P(parseInt(r))},{immediate:!1});const P=async r=>{try{let t=f.getManufacturerById(r);if(t||(await f.fetchManufacturerDetails(r),t=f.getManufacturerById(r)),e.value=t,e.value)try{const i=await f.fetchManufacturerProducts(r);v.value=Array.isArray(i)?i:i.results||[]}catch(i){console.error("Error loading manufacturer products:",i),v.value=[]}}catch(t){console.error("Error loading manufacturer:",t),e.value=null}};T(async()=>{const r=parseInt(k.params.id);r&&await P(r)});const S=r=>{L.push(`/product/${r}`)},V=()=>{console.log("View all products for manufacturer:",e.value?.id)};return(r,t)=>(a(),c(J,{class:"bg-white"},{default:l(()=>[o("div",Z,[s(_,{flat:"",dense:"",size:"sm",icon:"arrow_back",label:"Back",color:"primary",class:"q-mb-sm text-caption",onClick:t[0]||(t[0]=i=>r.$router.back())}),h(f).isLoadingDetails?(a(),n("div",K,[s(C,{color:"primary",size:"3em"}),t[2]||(t[2]=o("div",{class:"text-body2 text-grey-7 q-mt-md"},"Loading manufacturer details...",-1))])):!e.value&&!h(f).isLoadingDetails?(a(),n("div",O,[s(d,{name:"business",size:"64px",color:"grey-5"}),t[3]||(t[3]=o("div",{class:"text-h6 text-grey-6 q-mt-md"},"Manufacturer not found",-1)),t[4]||(t[4]=o("div",{class:"text-body2 text-grey-7 q-mt-sm"},"The manufacturer you're looking for doesn't exist",-1)),s(_,{unelevated:"",color:"primary",label:"Go Back",icon:"arrow_back",class:"q-mt-md",onClick:t[1]||(t[1]=i=>r.$router.back())})])):e.value?(a(),n("div",X,[o("div",Y,[s(b,{flat:"",bordered:"",class:"q-mb-sm"},{default:l(()=>[o("div",ee,[s(M,{src:B.value,alt:w.value,ratio:"1",class:"manufacturer-logo-large",fit:"contain"},{error:l(()=>[o("div",te,[s(d,{name:"business",size:"96px",color:"grey-5"})])]),_:1},8,["src","alt"]),e.value.is_featured?(a(),c(G,{key:0,dense:"",color:"primary","text-color":"white",icon:"star",class:"featured-badge-large"},{default:l(()=>[...t[5]||(t[5]=[y(" Featured ",-1)])]),_:1})):u("",!0)]),s(g,null,{default:l(()=>[o("div",re,[o("div",se,m(w.value),1),e.value.is_verified?(a(),c(d,{key:0,name:"verified",color:"positive",size:"sm",class:"q-ml-xs"})):u("",!0)]),e.value.short_description?(a(),n("div",ae,m(e.value.short_description),1)):u("",!0)]),_:1})]),_:1}),s(b,{flat:"",bordered:"",class:"q-mb-sm"},{default:l(()=>[s(g,null,{default:l(()=>[t[6]||(t[6]=o("div",{class:"text-subtitle2 text-weight-bold q-mb-sm"},"Contact Information",-1)),e.value.email?(a(),n("div",oe,[s(d,{name:"email",color:"primary",size:"sm",class:"q-mr-sm"}),o("a",{href:`mailto:${e.value.email}`,class:"text-body2 text-primary text-no-underline"},m(e.value.email),9,le)])):u("",!0),e.value.phone?(a(),n("div",ie,[s(d,{name:"phone",color:"primary",size:"sm",class:"q-mr-sm"}),o("a",{href:`tel:${e.value.phone}`,class:"text-body2 text-primary text-no-underline"},m(e.value.phone),9,ne)])):u("",!0),e.value.website?(a(),n("div",ue,[s(d,{name:"language",color:"primary",size:"sm",class:"q-mr-sm"}),o("a",{href:e.value.website,target:"_blank",rel:"noopener noreferrer",class:"text-body2 text-primary text-no-underline"}," Visit Website ",8,ce)])):u("",!0),e.value.address?(a(),n("div",de,[s(d,{name:"location_on",color:"primary",size:"sm",class:"q-mr-sm q-mt-xs"}),o("div",me,m(e.value.address),1)])):u("",!0),q.value?(a(),n("div",fe,[s(d,{name:"place",color:"primary",size:"sm",class:"q-mr-sm"}),o("div",ve,m(q.value),1)])):u("",!0)]),_:1})]),_:1}),I.value?(a(),c(b,{key:0,flat:"",bordered:"",class:"q-mb-sm"},{default:l(()=>[s(g,null,{default:l(()=>[t[11]||(t[11]=o("div",{class:"text-subtitle2 text-weight-bold q-mb-sm"},"Follow Us",-1)),o("div",_e,[e.value.facebook_url?(a(),c(_,{key:0,round:"",dense:"",flat:"",color:"primary",href:e.value.facebook_url,target:"_blank",rel:"noopener noreferrer",icon:"facebook"},{default:l(()=>[s(x,null,{default:l(()=>[...t[7]||(t[7]=[y("Facebook",-1)])]),_:1})]),_:1},8,["href"])):u("",!0),e.value.instagram_url?(a(),c(_,{key:1,round:"",dense:"",flat:"",color:"primary",href:e.value.instagram_url,target:"_blank",rel:"noopener noreferrer",icon:"instagram"},{default:l(()=>[s(x,null,{default:l(()=>[...t[8]||(t[8]=[y("Instagram",-1)])]),_:1})]),_:1},8,["href"])):u("",!0),e.value.twitter_url?(a(),c(_,{key:2,round:"",dense:"",flat:"",color:"primary",href:e.value.twitter_url,target:"_blank",rel:"noopener noreferrer",icon:"twitter"},{default:l(()=>[s(x,null,{default:l(()=>[...t[9]||(t[9]=[y("Twitter",-1)])]),_:1})]),_:1},8,["href"])):u("",!0),e.value.linkedin_url?(a(),c(_,{key:3,round:"",dense:"",flat:"",color:"primary",href:e.value.linkedin_url,target:"_blank",rel:"noopener noreferrer",icon:"linkedin"},{default:l(()=>[s(x,null,{default:l(()=>[...t[10]||(t[10]=[y("LinkedIn",-1)])]),_:1})]),_:1},8,["href"])):u("",!0)])]),_:1})]),_:1})):u("",!0)]),o("div",pe,[s(b,{flat:"",bordered:"",class:"q-mb-sm"},{default:l(()=>[s(g,null,{default:l(()=>[t[12]||(t[12]=o("div",{class:"text-subtitle2 text-weight-bold q-mb-sm"},"About",-1)),o("div",{class:"text-body2 text-grey-8",innerHTML:$.value},null,8,ye)]),_:1})]),_:1}),s(b,{flat:"",bordered:""},{default:l(()=>[s(g,null,{default:l(()=>[o("div",ge,[o("div",be,[t[13]||(t[13]=y(" Products ",-1)),v.value.length>0?(a(),n("span",xe," ("+m(v.value.length)+") ",1)):u("",!0)]),v.value.length>0?(a(),c(_,{key:0,flat:"",dense:"",size:"sm",label:"View All",color:"primary","icon-right":"arrow_forward","no-caps":"",onClick:V})):u("",!0)]),h(f).isLoadingProducts?(a(),n("div",he,[s(C,{color:"primary",size:"2em"}),t[14]||(t[14]=o("div",{class:"text-caption text-grey-7 q-mt-sm"},"Loading products...",-1))])):v.value.length===0?(a(),n("div",ke,[s(d,{name:"inventory_2",size:"48px",color:"grey-5"}),t[15]||(t[15]=o("div",{class:"text-body2 text-grey-6 q-mt-sm"},"No products available",-1))])):(a(),n("div",we,[(a(!0),n(H,null,R(D.value,i=>(a(),n("div",{key:i.id,class:"col-6 col-sm-4 col-md-3"},[s(b,{class:"product-card cursor-pointer",flat:"",bordered:"",onClick:Me=>S(i.id)},{default:l(()=>[s(M,{src:F(i),alt:i.name||i.title,ratio:"1",class:"product-image"},null,8,["src","alt"]),s(g,{class:"q-pa-xs"},{default:l(()=>[o("div",qe,m(i.name||i.title),1),Q(i)?(a(),n("div",Qe,m(N(i)),1)):(a(),n("div",Pe," Price on enquiry "))]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]))]),_:1})]),_:1})])])):u("",!0)])]),_:1}))}},He=W(ze,[["__scopeId","data-v-8eb3cf59"]]);export{He as default};
