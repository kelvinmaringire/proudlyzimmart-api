import{k as L,r as i,c as g,m as B,n as P,p as o,q as I,t as $,v as s,f as l,Q,A as F,z as V,y as u,C as R,x as T,B as O,K as S}from"./index-CUBQy48D.js";import{Q as z}from"./QSeparator-es0GegHz.js";import{Q as m}from"./QInput-SjOosiTB.js";import{Q as D}from"./QLinearProgress-CfhR_hR4.js";import{Q as W}from"./QCheckbox-CwNH7dAi.js";import{Q as j}from"./QForm-DG6vkUlw.js";import{Q as M}from"./QCard-DZMDY_Ca.js";import{Q as Z}from"./QPage-DqzRJpM6.js";import{s as K}from"./socialAuth-DG69hOk5.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-yr8oZmB6.js";import"./focus-manager-BJWzFvJg.js";import"./use-checkbox-CztHn_fb.js";const H={class:"full-width q-pa-md"},J={class:"row justify-center"},X={class:"col-12 col-md-8 col-lg-6"},ee={class:"q-gutter-y-md"},ae={class:"row items-center q-my-md"},le={class:"col"},se={class:"col"},te={class:"row q-col-gutter-md"},oe={class:"col-12 col-sm-6"},re={class:"col-12 col-sm-6"},ne={key:0,class:"q-mt-xs"},ie={class:"text-caption text-grey-6 q-mt-xs"},ue={class:"text-center q-mt-lg"},de={class:"text-center q-mt-lg"},me={__name:"RegisterPage",setup(ce){const q="1009966009322-kebt3tmc0st8udl6aqr4si8s60dh6vdc.apps.googleusercontent.com",C=I(),f=L(),y=i(""),b=i(""),w=i(""),h=i(""),r=i(""),x=i(""),c=i(!1),k=i(!1),d=i(null),_=g(()=>f.isLoading),n=g(()=>_.value||d.value!==null),p=g(()=>{if(!r.value)return 0;const t=[r.value.length>=8&&.2,r.value.length>=12&&.1,/[A-Z]/.test(r.value)&&.2,/[a-z]/.test(r.value)&&.2,/[0-9]/.test(r.value)&&.2,/[!@#$%^&*]/.test(r.value)&&.2];return Math.min(t.reduce((a,v)=>a+(v||0),0),1)}),N=g(()=>p.value<.4?"negative":p.value<.7?"warning":"positive"),U=g(()=>p.value<.4?"Weak":p.value<.7?"Medium":"Strong"),A=async()=>{try{await f.register({first_name:y.value,last_name:b.value,email:w.value,username:h.value,password1:r.value,password2:x.value}),C.push("/login")}catch(t){console.error("Registration error:",t)}},E=(t,a)=>{console.error(`${a} registration error:`,t);const e=t.message==="Google sign-in failed"||t.message==="Google OAuth failed"||t.message==="Facebook login failed or was cancelled"?`${a} sign-in was cancelled or failed. Please try again.`:t.message||`Failed to sign in with ${a}. Please try again.`;f.$q?.notify({type:"negative",message:e,position:"top"})},G=async()=>{d.value="google";try{const t=await K(q);await f.socialLoginGoogle(t),C.push("/dashboard")}catch(t){E(t,"Google")}finally{d.value=null}};return(t,a)=>{const v=$("router-link");return P(),B(Z,{class:"flex flex-center bg-grey-1"},{default:o(()=>[s("div",H,[s("div",J,[s("div",X,[a[14]||(a[14]=s("div",{class:"text-center q-mb-lg"},[s("div",{class:"text-h5 text-weight-bold q-mb-xs"},"Create Account"),s("div",{class:"text-grey-6"},"Sign up to start shopping")],-1)),l(M,{class:"q-pa-lg shadow-2",flat:""},{default:o(()=>[s("div",ee,[l(Q,{outline:"",color:"blue-9",class:"full-width",loading:d.value==="google",disable:_.value||d.value!==null||!F(q),onClick:G},{default:o(()=>[l(u,{left:"",size:"20px",name:"img:https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"}),a[8]||(a[8]=V(" Continue with Google ",-1))]),_:1},8,["loading","disable"]),s("div",ae,[s("div",le,[l(z)]),a[9]||(a[9]=s("div",{class:"col-auto q-px-md text-grey-6"},"or",-1)),s("div",se,[l(z)])])]),l(j,{onSubmit:A,class:"q-gutter-y-md"},{default:o(()=>[s("div",te,[s("div",oe,[l(m,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),outlined:"",label:"First Name",placeholder:"Enter your first name",autocomplete:"given-name",rules:[e=>!!e||"First name is required",e=>e.length>=2||"Name must be at least 2 characters"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"person"})]),_:1},8,["modelValue","rules","disable"])]),s("div",re,[l(m,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),outlined:"",label:"Last Name",placeholder:"Enter your last name",autocomplete:"family-name",rules:[e=>!!e||"Last name is required",e=>e.length>=2||"Name must be at least 2 characters"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"person"})]),_:1},8,["modelValue","rules","disable"])])]),l(m,{modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value=e),outlined:"",label:"Email Address",placeholder:"Enter your email",type:"email",autocomplete:"email",rules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Please enter a valid email"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"email"})]),_:1},8,["modelValue","rules","disable"]),l(m,{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value=e),outlined:"",label:"Username",placeholder:"Choose a username",autocomplete:"username",rules:[e=>!!e||"Username is required",e=>e.length>=3||"Username must be at least 3 characters",e=>/^[a-zA-Z0-9_]+$/.test(e)||"Only letters, numbers, and underscores allowed"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"alternate_email"})]),_:1},8,["modelValue","rules","disable"]),l(m,{modelValue:r.value,"onUpdate:modelValue":a[5]||(a[5]=e=>r.value=e),type:c.value?"text":"password",outlined:"",label:"Password",placeholder:"Create a password",autocomplete:"new-password",rules:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"lock"})]),append:o(()=>[l(u,{name:c.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>c.value=!c.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),r.value?(P(),R("div",ne,[a[10]||(a[10]=s("div",{class:"text-caption"},"Password strength:",-1)),l(D,{value:p.value,color:N.value,class:"q-mt-xs",rounded:""},null,8,["value","color"]),s("div",ie,O(U.value),1)])):T("",!0),l(m,{modelValue:x.value,"onUpdate:modelValue":a[6]||(a[6]=e=>x.value=e),type:c.value?"text":"password",outlined:"",label:"Confirm Password",placeholder:"Confirm your password",autocomplete:"new-password",rules:[e=>!!e||"Please confirm your password",e=>e===r.value||"Passwords do not match"],"lazy-rules":"",disable:n.value},{prepend:o(()=>[l(u,{name:"lock"})]),_:1},8,["modelValue","type","rules","disable"]),l(W,{modelValue:k.value,"onUpdate:modelValue":a[7]||(a[7]=e=>k.value=e),label:"I agree to the Terms of Service and Privacy Policy",color:"primary",rules:[e=>!!e||"You must accept the terms"],disable:n.value},null,8,["modelValue","rules","disable"]),l(Q,{type:"submit",color:"primary",class:"full-width q-mt-md",label:"Create Account",loading:_.value,disable:d.value!==null},null,8,["loading","disable"]),s("div",ue,[a[12]||(a[12]=s("span",{class:"text-grey-7"},"Already have an account? ",-1)),l(v,{to:"/login",class:S(["text-primary text-weight-medium text-no-underline",{"text-grey-5":n.value}])},{default:o(()=>[...a[11]||(a[11]=[V(" Sign in ",-1)])]),_:1},8,["class"])])]),_:1})]),_:1}),s("div",de,[l(v,{to:"/",class:S(["text-grey-7 text-no-underline",{"text-grey-5":n.value}])},{default:o(()=>[l(u,{name:"arrow_back",size:"16px"}),a[13]||(a[13]=V(" Back to home ",-1))]),_:1},8,["class"])])])])])]),_:1})}}},ke=Y(me,[["__scopeId","data-v-3064d533"]]);export{ke as default};
