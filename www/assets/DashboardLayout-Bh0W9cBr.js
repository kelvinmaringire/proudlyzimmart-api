import{a3 as lt,a4 as st,k as rt,u as dt,l as nt,r as S,c as it,w as ut,m as p,n as d,p as e,q as ct,t as M,f as t,v as l,Q as g,x as Q,y as f,z as n,B as y,A as m,a1 as pt,D as b,R as C,C as V,F as mt,E as ft}from"./index-Btp_LviN.js";import{Q as U}from"./QInput-BmIudfcp.js";import{Q as gt}from"./QSpace-Cvqp2M6g.js";import{Q as vt,a as yt,b as _t,_ as Z,c as $,d as A,e as K,f as bt,g as xt}from"./logo-DTrJfpMJ.js";import{Q as P}from"./QTooltip-DcFPxxnr.js";import{Q as _,a as r}from"./QItem-DG9taRDR.js";import{Q as q}from"./QItemLabel-CCPjO0CN.js";import{Q as O}from"./QSeparator-DUdd4515.js";import{Q as B}from"./QList-4uq_FW4h.js";import{Q as ht}from"./QMenu-35cTL0Ny.js";import{Q as wt}from"./QImg-BeS8y-QW.js";import{g as kt,c as Qt}from"./position-engine-BoxfyDO4.js";import{u as Ct}from"./use-quasar-D75lQ8Pf.js";import"./use-dark-COX_BI4o.js";import"./focus-manager-BJWzFvJg.js";import"./touch-CeO0od3k.js";import"./use-prevent-scroll-BiTKNZG2.js";import"./use-timeout-BaxCR_yz.js";function W(i){if(i===!1)return 0;if(i===!0||i===void 0)return 1;const c=parseInt(i,10);return isNaN(c)?0:c}const z=lt({name:"close-popup",beforeMount(i,{value:c}){const v={depth:W(c),handler(w){v.depth!==0&&setTimeout(()=>{const u=kt(i);u!==void 0&&Qt(u,w,v.depth)})},handlerKey(w){st(w,13)===!0&&v.handler(w)}};i.__qclosepopup=v,i.addEventListener("click",v.handler),i.addEventListener("keyup",v.handlerKey)},updated(i,{value:c,oldValue:v}){c!==v&&(i.__qclosepopup.depth=W(c))},beforeUnmount(i){const c=i.__qclosepopup;i.removeEventListener("click",c.handler),i.removeEventListener("keyup",c.handlerKey),delete i.__qclosepopup}}),qt={class:"desktop-search gt-sm"},It={class:"row items-center q-gutter-xs q-gutter-sm-md"},St={class:"mobile-search lt-md q-px-md q-pb-md"},Lt={class:"column full-height"},Vt={class:"column full-height"},Pt={class:"q-pa-md bg-primary text-white"},Dt={class:"row items-center justify-between"},$t={class:"text-caption text-white text-opacity-80"},Bt={key:0,class:"q-pa-xl text-center"},zt={key:1,class:"q-pa-md"},Et={class:"row items-center q-gutter-xs"},Nt={class:"text-body2 text-weight-medium",style:{"min-width":"30px","text-align":"center"}},Ft={key:0,class:"q-pa-md bg-grey-1 border-top"},Rt={class:"row items-center justify-between q-mb-md"},Tt={class:"text-h6 text-primary text-weight-bold"},se={__name:"DashboardLayout",setup(i){const c=Ct(),v=ct(),w=rt(),u=dt(),{itemCount:E}=nt(u),k=S(!0),L=S(!1),x=S(""),N=S(5),F=S(3),j=it(()=>c.screen.lt.sm?320:380);ut(()=>c.screen.gt.sm,o=>{o?k.value=!0:k.value=!1},{immediate:!0});const H=()=>{k.value=!k.value},I=()=>{L.value=!L.value},Y=async()=>{await w.logout(),v.push("/login")},G=o=>o.product?.primary_image||o.product?.image||o.product?.image_url||o.product?.thumbnail||"https://via.placeholder.com/200",R=o=>o.product?.name||o.product?.title||"Product",J=o=>o.product?.brand||o.product?.manufacturer||"ProudlyZimmart",X=o=>{const a=o.price||o.product?.current_price_usd||o.product?.price_usd||o.product?.price||0,h=o.quantity||1,D=a*h;return`$${a.toFixed(2)}${h>1?` × ${h} = $${D.toFixed(2)}`:""}`},tt=async o=>{const a=o.product_id||o.product?.id;a&&await u.updateItemQuantity(a,(o.quantity||1)+1)},et=async o=>{const a=o.product_id||o.product?.id;if(a){const h=Math.max(1,(o.quantity||1)-1);await u.updateItemQuantity(a,h)}},at=async o=>{const a=o.product_id||o.product?.id;a&&await u.removeItem(a)},ot=()=>{I()};return(o,a)=>{const h=M("router-link"),D=M("router-view");return d(),p(vt,{view:"hHh lpR fFf",class:"bg-grey-1"},{default:e(()=>[t(yt,{elevated:"",class:"bg-white text-dark","height-hint":"98"},{default:e(()=>[t(_t,{class:"constrain"},{default:e(()=>[t(g,{dense:"",flat:"",round:"",icon:"menu",onClick:H}),t(h,{to:"/",class:"row items-center"},{default:e(()=>[...a[6]||(a[6]=[l("img",{src:Z,alt:"ProudlyZimmart",class:"logo-desktop gt-xs",style:{height:"52px",width:"auto"}},null,-1),l("img",{src:Z,alt:"ProudlyZimmart",class:"logo-mobile lt-sm",style:{height:"38px",width:"auto"}},null,-1)])]),_:1}),l("div",qt,[t(U,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=s=>x.value=s),outlined:"",dense:"",placeholder:"Search products, manufacturers, brands...",class:"full-width","bg-color":"grey-1","input-class":"text-body1"},{prepend:e(()=>[t(f,{name:"search",color:"grey-7"})]),append:e(()=>[x.value?(d(),p(f,{key:0,name:"clear",class:"cursor-pointer",onClick:a[0]||(a[0]=s=>x.value="")})):Q("",!0)]),_:1},8,["modelValue"])]),t(gt),t(g,{class:"gt-sm text-primary","no-caps":"",push:"",style:{"background-color":"#f5f5f5",color:"#555",padding:"7px 16px","border-radius":"8px"},to:"/"},{default:e(()=>[...a[7]||(a[7]=[n(" Back to Store ",-1)])]),_:1}),l("div",It,[t(g,{round:"",flat:"",dense:"",icon:"notifications",class:"gt-xs",color:"info"},{default:e(()=>[F.value>0?(d(),p($,{key:0,color:"info",floating:"",rounded:""},{default:e(()=>[n(y(F.value),1)]),_:1})):Q("",!0),t(P,{anchor:"bottom middle",self:"top middle"},{default:e(()=>[...a[8]||(a[8]=[n(" Notifications ",-1)])]),_:1})]),_:1}),t(g,{round:"",flat:"",dense:"",icon:"favorite_border",to:"/wishlist",class:"gt-xs",color:"negative"},{default:e(()=>[N.value>0?(d(),p($,{key:0,color:"negative",floating:"",rounded:""},{default:e(()=>[n(y(N.value),1)]),_:1})):Q("",!0),t(P,{anchor:"bottom middle",self:"top middle"},{default:e(()=>[...a[9]||(a[9]=[n(" Wishlist ",-1)])]),_:1})]),_:1}),t(g,{round:"",flat:"",dense:"",icon:"shopping_cart",onClick:I,color:"primary"},{default:e(()=>[m(E)>0?(d(),p($,{key:0,color:"primary",floating:"",rounded:""},{default:e(()=>[n(y(m(E)),1)]),_:1})):Q("",!0),t(P,{anchor:"bottom middle",self:"top middle"},{default:e(()=>[...a[10]||(a[10]=[n(" Cart ",-1)])]),_:1})]),_:1}),t(g,{round:"",flat:"",dense:""},{default:e(()=>[t(pt,{size:m(c).screen.lt.sm?"28px":"32px"},{default:e(()=>[...a[11]||(a[11]=[l("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1)])]),_:1},8,["size"]),t(ht,null,{default:e(()=>[t(B,{style:{"min-width":"200px"}},{default:e(()=>[b((d(),p(_,{clickable:"",to:"/profile"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"person"})]),_:1}),t(r,null,{default:e(()=>[t(q,null,{default:e(()=>[...a[12]||(a[12]=[n("My Profile",-1)])]),_:1})]),_:1})]),_:1})),[[z]]),b((d(),p(_,{clickable:"",to:"/dashboard/settings"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"settings"})]),_:1}),t(r,null,{default:e(()=>[t(q,null,{default:e(()=>[...a[13]||(a[13]=[n("Settings",-1)])]),_:1})]),_:1})]),_:1})),[[z]]),t(O),b((d(),p(_,{clickable:"",onClick:Y},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"logout"})]),_:1}),t(r,null,{default:e(()=>[t(q,null,{default:e(()=>[...a[14]||(a[14]=[n("Logout",-1)])]),_:1})]),_:1})]),_:1})),[[z]])]),_:1})]),_:1})]),_:1})])]),_:1}),l("div",St,[t(U,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=s=>x.value=s),outlined:"",dense:"",placeholder:"Search products, manufacturers, brands...",class:"full-width","bg-color":"white","input-class":"text-body1"},{prepend:e(()=>[t(f,{name:"search"})]),append:e(()=>[x.value?(d(),p(f,{key:0,name:"clear",class:"cursor-pointer",onClick:a[2]||(a[2]=s=>x.value="")})):Q("",!0)]),_:1},8,["modelValue"])])]),_:1}),t(A,{modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=s=>k.value=s),side:"left",overlay:m(c).screen.lt.md,bordered:!m(c).screen.lt.md,"show-if-above":"",elevated:"",width:320},{default:e(()=>[l("div",Lt,[a[21]||(a[21]=l("div",{class:"q-pa-xs bg-primary text-center"},[l("div",{class:"text-h6 text-weight-bold text-white"},"Dashboard")],-1)),t(K,{class:"flex-1"},{default:e(()=>[t(B,null,{default:e(()=>[b((d(),p(_,{clickable:"",to:"/dashboard",exact:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"dashboard"})]),_:1}),t(r,null,{default:e(()=>[...a[15]||(a[15]=[n("Dashboard",-1)])]),_:1})]),_:1})),[[C]]),b((d(),p(_,{clickable:"",to:"/dashboard/settings"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"settings"})]),_:1}),t(r,null,{default:e(()=>[...a[16]||(a[16]=[n("Settings",-1)])]),_:1})]),_:1})),[[C]]),t(O),b((d(),p(_,{clickable:"",to:"/"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"store"})]),_:1}),t(r,null,{default:e(()=>[...a[17]||(a[17]=[n("Back to Store",-1)])]),_:1})]),_:1})),[[C]]),b((d(),p(_,{clickable:"",to:"/wishlist"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"favorite"})]),_:1}),t(r,null,{default:e(()=>[...a[18]||(a[18]=[n("Wishlist",-1)])]),_:1})]),_:1})),[[C]]),b((d(),p(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"shopping_bag"})]),_:1}),t(r,null,{default:e(()=>[...a[19]||(a[19]=[n("My Orders",-1)])]),_:1})]),_:1})),[[C]]),b((d(),p(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(f,{name:"sell"})]),_:1}),t(r,null,{default:e(()=>[...a[20]||(a[20]=[n("Sell Products",-1)])]),_:1})]),_:1})),[[C]])]),_:1})]),_:1})])]),_:1},8,["modelValue","overlay","bordered"]),t(A,{modelValue:L.value,"onUpdate:modelValue":a[5]||(a[5]=s=>L.value=s),side:"right",overlay:"",elevated:"",width:j.value},{default:e(()=>[l("div",Vt,[l("div",Pt,[l("div",Dt,[l("div",null,[a[22]||(a[22]=l("div",{class:"text-h6 text-weight-bold"},"Your Cart",-1)),l("div",$t,y(m(u).itemCount)+" "+y(m(u).itemCount===1?"item":"items"),1)]),t(g,{round:"",dense:"",flat:"",icon:"close",class:"text-white",onClick:I})])]),t(K,{class:"flex-1"},{default:e(()=>[m(u).isEmpty?(d(),V("div",Bt,[t(f,{name:"shopping_cart",size:"80px",color:"grey-4"}),a[23]||(a[23]=l("div",{class:"text-h6 text-grey-6 q-mt-md"},"Your cart is empty",-1)),a[24]||(a[24]=l("div",{class:"text-body2 text-grey-7 q-mt-sm"},"Start adding products to your cart",-1)),t(g,{unelevated:"",color:"primary",label:"Continue Shopping",class:"q-mt-lg","no-caps":"",onClick:I})])):(d(),V("div",zt,[t(B,{separator:""},{default:e(()=>[(d(!0),V(mt,null,ft(m(u).cartItems,s=>(d(),p(_,{key:s.product_id||s.product?.id,class:"q-pa-none q-mb-sm"},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(wt,{src:G(s),alt:R(s),ratio:"1",class:"cart-item-image",style:{width:"70px",height:"70px","border-radius":"8px"}},null,8,["src","alt"])]),_:2},1024),t(r,null,{default:e(()=>[t(q,{class:"text-body2 text-weight-medium"},{default:e(()=>[n(y(R(s)),1)]),_:2},1024),t(q,{caption:"",class:"text-grey-7"},{default:e(()=>[n(y(J(s)),1)]),_:2},1024),t(q,{class:"text-body2 text-primary text-weight-bold q-mt-xs"},{default:e(()=>[n(y(X(s)),1)]),_:2},1024)]),_:2},1024),t(r,{side:""},{default:e(()=>[l("div",Et,[t(g,{round:"",dense:"",flat:"",size:"sm",icon:"remove",color:"grey-7",disable:m(u).isLoading,onClick:T=>et(s)},null,8,["disable","onClick"]),l("div",Nt,y(s.quantity||1),1),t(g,{round:"",dense:"",flat:"",size:"sm",icon:"add",color:"primary",disable:m(u).isLoading,onClick:T=>tt(s)},null,8,["disable","onClick"])]),t(g,{flat:"",dense:"",size:"sm",icon:"delete_outline",color:"negative",class:"q-mt-xs full-width",disable:m(u).isLoading,onClick:T=>at(s)},{default:e(()=>[t(P,null,{default:e(()=>[...a[25]||(a[25]=[n("Remove",-1)])]),_:1})]),_:1},8,["disable","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1}),m(u).isEmpty?Q("",!0):(d(),V("div",Ft,[l("div",Rt,[a[26]||(a[26]=l("div",{class:"text-body1 text-weight-medium"},"Subtotal",-1)),l("div",Tt," $"+y(m(u).cartTotal.toFixed(2)),1)]),t(g,{unelevated:"",color:"primary",label:"Proceed to Checkout",class:"full-width",size:"md","no-caps":"",loading:m(u).isLoading,onClick:ot},null,8,["loading"]),t(g,{flat:"",dense:"",label:"Continue Shopping",class:"full-width q-mt-sm","no-caps":"",onClick:I})]))])]),_:1},8,["modelValue","width"]),t(bt,null,{default:e(()=>[t(D)]),_:1}),t(xt,{elevated:"",class:"bg-primary text-white"},{default:e(()=>[...a[27]||(a[27]=[l("div",{class:"constrain q-py-lg text-center"},[l("div",{class:"text-caption"},"© 2025 ProudlyZimmart • Made with love in Zimbabwe")],-1)])]),_:1})]),_:1})}}};export{se as default};
