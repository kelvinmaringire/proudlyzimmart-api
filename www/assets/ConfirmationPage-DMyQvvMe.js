import{q as F,c as x,t as M,C as c,n as l,v as t,f as r,m as C,x as w,y as v,z as _,B as d,p as n,F as V,E as L,K as E,Q as h,N as U,o as j,I as H,A as D,J as R}from"./index-CUBQy48D.js";import{Q as W}from"./QPage-DqzRJpM6.js";import{u as N}from"./checkout-store-BIfX1mY8.js";import{Q as g}from"./QCardSection-DxIQyhwE.js";import{Q as y}from"./QCard-DZMDY_Ca.js";import{Q as J}from"./QImg-B8fmnvHW.js";import{Q as K}from"./QSeparator-es0GegHz.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-dark-yr8oZmB6.js";import"./use-timeout-sN3gBUuD.js";const Z={class:"order-confirmation"},G={class:"text-center q-mb-lg"},X={class:"text-body1 text-grey-7 q-mt-sm"},Y={class:"text-weight-medium"},tt={class:"row q-col-gutter-md"},et={class:"col-12 col-md-6"},st={class:"text-h6 text-weight-bold text-primary"},ot={class:"col-12 col-md-6"},rt={class:"text-body1 text-weight-medium"},dt={class:"col-12 col-md-6"},it={class:"text-body1 text-weight-medium"},at={class:"col-12 col-md-6"},nt={class:"text-h6 text-weight-bold text-primary"},lt={class:"row q-col-gutter-md"},ct={class:"col-auto"},ut={class:"col"},mt={class:"text-body2 text-weight-medium q-mb-xs"},pt={class:"text-caption text-grey-7 q-mb-xs"},_t={class:"text-body2 text-primary text-weight-bold"},vt={class:"text-body2"},gt={class:"text-weight-medium q-mb-xs"},yt={key:0},xt={key:0},ht={class:"q-mt-xs"},bt={class:"row items-center justify-between"},ft={class:"text-caption text-grey-7"},wt={class:"row items-center"},qt={class:"text-body1 text-primary"},kt={class:"row q-col-gutter-md q-mt-lg"},It={class:"col-12 col-md-6"},Dt={class:"col-12 col-md-6"},Ct={class:"text-center q-mt-lg"},Nt={__name:"OrderConfirmation",props:{orderId:{type:[String,Number],required:!0}},setup(q){const b=q,u=F(),m=N(),s=x(()=>m.order),a=x(()=>s.value?.items||s.value?.order_items||[]),f=x(()=>{if(!s.value)return"5-7 business days";const o=m.shippingMethod?.estimated_days||"5-7",e=new Date(s.value.created_at||s.value.order_date||Date.now()),p=parseInt(o.split("-")[0])||5,i=new Date(e);return i.setDate(i.getDate()+p),i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),$=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Q=o=>({card:"Credit/Debit Card",mobile_money:"Mobile Money",bank_transfer:"Bank Transfer",cash_on_delivery:"Cash on Delivery"})[o]||o||"N/A",P=o=>o.product?.primary_image||o.product?.image||o.product?.image_url||o.product?.thumbnail||"https://via.placeholder.com/200",k=o=>o.product?.name||o.product?.title||"Product",O=o=>o.product?.brand||o.product?.manufacturer||"ProudlyZimmart",z=o=>`$${(o.price||o.product?.current_price_usd||o.product?.price_usd||o.product?.price||0).toFixed(2)}`,B=o=>{const e=o.price||o.product?.current_price_usd||o.product?.price_usd||o.product?.price||0,p=o.quantity||1;return`$${(e*p).toFixed(2)}`},T=()=>{U.create({type:"info",message:"Invoice download will be available soon",position:"top"})},A=()=>{u.push("/")};return(o,e)=>{const p=M("router-link");return l(),c("div",Z,[t("div",G,[r(v,{name:"check_circle",size:"120px",color:"positive"}),e[1]||(e[1]=t("div",{class:"text-h4 text-weight-bold q-mt-md"},"Order Placed Successfully!",-1)),t("div",X,[e[0]||(e[0]=_(" Thank you for your order. We've sent a confirmation email to ",-1)),t("span",Y,d(s.value?.shipping_address?.email||"your email"),1)])]),r(y,{flat:"",bordered:"",class:"q-mb-md"},{default:n(()=>[r(g,null,{default:n(()=>[e[6]||(e[6]=t("div",{class:"text-h6 text-weight-bold q-mb-md"},"Order Details",-1)),t("div",tt,[t("div",et,[e[2]||(e[2]=t("div",{class:"text-body2 text-grey-7 q-mb-xs"},"Order Number",-1)),t("div",st,d(s.value?.order_number||s.value?.id||b.orderId),1)]),t("div",ot,[e[3]||(e[3]=t("div",{class:"text-body2 text-grey-7 q-mb-xs"},"Order Date",-1)),t("div",rt,d($(s.value?.created_at||s.value?.order_date)),1)]),t("div",dt,[e[4]||(e[4]=t("div",{class:"text-body2 text-grey-7 q-mb-xs"},"Payment Method",-1)),t("div",it,d(Q(s.value?.payment_method)),1)]),t("div",at,[e[5]||(e[5]=t("div",{class:"text-body2 text-grey-7 q-mb-xs"},"Total Amount",-1)),t("div",nt," $"+d((s.value?.total||s.value?.total_amount||0).toFixed(2)),1)])])]),_:1})]),_:1}),r(y,{flat:"",bordered:"",class:"q-mb-md"},{default:n(()=>[r(g,null,{default:n(()=>[e[7]||(e[7]=t("div",{class:"text-h6 text-weight-bold q-mb-md"},"Order Items",-1)),(l(!0),c(V,null,L(a.value,(i,I)=>(l(),c("div",{key:i.product_id||i.product?.id||I,class:E(["order-item-row",{"q-mb-md":I<a.value.length-1}])},[t("div",lt,[t("div",ct,[r(J,{src:P(i),alt:k(i),ratio:"1",class:"order-item-image",style:{width:"80px",height:"80px","border-radius":"8px"}},null,8,["src","alt"])]),t("div",ut,[t("div",mt,d(k(i)),1),t("div",pt,d(O(i)),1),t("div",_t,d(z(i))+" Ã— "+d(i.quantity||1)+" = "+d(B(i)),1)])])],2))),128))]),_:1})]),_:1}),r(y,{flat:"",bordered:"",class:"q-mb-md"},{default:n(()=>[r(g,null,{default:n(()=>[e[9]||(e[9]=t("div",{class:"text-h6 text-weight-bold q-mb-md"},"Shipping Information",-1)),t("div",vt,[t("div",gt,d(s.value?.shipping_address?.full_name||"N/A"),1),t("div",null,d(s.value?.shipping_address?.address_line_1||""),1),s.value?.shipping_address?.address_line_2?(l(),c("div",yt,d(s.value.shipping_address.address_line_2),1)):w("",!0),t("div",null,[_(d(s.value?.shipping_address?.city||"")+", ",1),s.value?.shipping_address?.state?(l(),c("span",xt,d(s.value.shipping_address.state)+", ",1)):w("",!0),_(" "+d(s.value?.shipping_address?.postal_code||""),1)]),t("div",null,d(s.value?.shipping_address?.country||""),1),t("div",ht,[r(v,{name:"phone",size:"sm",class:"q-mr-xs"}),_(" "+d(s.value?.shipping_address?.phone||"N/A"),1)])]),r(K,{class:"q-my-md"}),t("div",bt,[t("div",null,[e[8]||(e[8]=t("div",{class:"text-body2 text-weight-medium"},"Estimated Delivery",-1)),t("div",ft,d(f.value),1)]),r(v,{name:"local_shipping",size:"32px",color:"primary"})])]),_:1})]),_:1}),s.value?.tracking_number?(l(),C(y,{key:0,flat:"",bordered:"",class:"q-mb-md"},{default:n(()=>[r(g,null,{default:n(()=>[e[11]||(e[11]=t("div",{class:"text-h6 text-weight-bold q-mb-md"},"Tracking Information",-1)),t("div",wt,[r(v,{name:"track_changes",size:"24px",color:"primary",class:"q-mr-md"}),t("div",null,[e[10]||(e[10]=t("div",{class:"text-body2 text-weight-medium"},"Tracking Number",-1)),t("div",qt,d(s.value.tracking_number),1)])])]),_:1})]),_:1})):w("",!0),t("div",kt,[t("div",It,[r(h,{outline:"",color:"primary",label:"Download Invoice",icon:"download",class:"full-width",onClick:T})]),t("div",Dt,[r(h,{unelevated:"",color:"primary",label:"Continue Shopping",icon:"shopping_bag",class:"full-width",onClick:A})])]),t("div",Ct,[r(p,{to:"/orders",class:"text-primary text-weight-medium text-no-underline"},{default:n(()=>[...e[12]||(e[12]=[_(" View Order History ",-1)])]),_:1})])])}}},St=S(Nt,[["__scopeId","data-v-ac6dbc79"]]),$t={class:"constrain q-pa-md"},Qt={key:0,class:"text-center q-pa-xl"},Pt={key:1},Ot={key:2,class:"text-center q-pa-xl"},zt={class:"row justify-center q-gutter-md"},Bt={__name:"ConfirmationPage",setup(q){const b=H(),u=N(),m=x(()=>b.params.orderId||u.orderId);return j(async()=>{if(m.value&&!u.order)try{await u.fetchOrderDetails(m.value)}catch(s){console.error("Error fetching order details:",s)}}),(s,a)=>(l(),C(W,{class:"bg-grey-1"},{default:n(()=>[t("div",$t,[D(u).isLoading?(l(),c("div",Qt,[r(R,{color:"primary",size:"3em"}),a[2]||(a[2]=t("div",{class:"text-body2 text-grey-7 q-mt-md"},"Loading order details...",-1))])):D(u).order||m.value?(l(),c("div",Pt,[r(St,{"order-id":m.value},null,8,["order-id"])])):(l(),c("div",Ot,[r(v,{name:"error_outline",size:"120px",color:"negative"}),a[3]||(a[3]=t("div",{class:"text-h5 text-weight-bold q-mt-md"},"Order Not Found",-1)),a[4]||(a[4]=t("div",{class:"text-body1 text-grey-7 q-mt-sm q-mb-lg"}," We couldn't find the order details. Please check your order history or contact support. ",-1)),t("div",zt,[r(h,{outline:"",color:"primary",label:"View Order History",icon:"history",onClick:a[0]||(a[0]=f=>s.$router.push("/orders"))}),r(h,{unelevated:"",color:"primary",label:"Continue Shopping",icon:"shopping_bag",onClick:a[1]||(a[1]=f=>s.$router.push("/"))})])]))])]),_:1}))}},Rt=S(Bt,[["__scopeId","data-v-10f74d56"]]);export{Rt as default};
